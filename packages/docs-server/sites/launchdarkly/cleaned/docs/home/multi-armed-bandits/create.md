`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Prerequisites](#prerequisites)
 * [Create flags or AI Configs](#create-flags-or-ai-configs)
 * [Create metrics](#create-metrics)
 * [Build multi-armed bandits](#build-multi-armed-bandits)
 * [Turn on flags or AI Configs](#turn-on-flags-or-ai-configs)
 * [Start iterations](#start-iterations)
This topic explains how to set up and configure a multi-armed bandit (MAB) in LaunchDarkly.
Configuring a MAB requires several steps:
 1. [Creating the flag or AI Config and its variations](/docs/home/multi-armed-bandits/create#create-flags-or-ai-configs),
 2. [Creating a metric](/docs/home/multi-armed-bandits/create#create-metrics),
 3. [Building the multi-armed bandit](/docs/home/multi-armed-bandits/create#build-multi-armed-bandits),
 4. [Turning on the flag or AI Config](/docs/home/multi-armed-bandits/create#turn-on-flags-or-ai-configs), and
 5. [Starting an iteration](/docs/home/multi-armed-bandits/create#start-iterations).
These steps are explained in detail below.
### Prerequisites
Before you build a MAB, you should read about and understand the following concepts:
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [randomization units](/docs/home/experimentation/randomization)
## Create flags or AI Configs
Before you begin a MAB, create a flag or AI Config with the variations you plan to optimize the performance of. You do not need to toggle on the flag before you create the MAB, but you do have to toggle flags on before you [start an iteration](/docs/home/multi-armed-bandits/create#start-iterations). AI Configs are on by default.
To learn more, read [Creating new flags](/docs/home/flags/new), [Creating flag variations](/docs/home/flags/variations), [Create AI Configs](/docs/home/ai-configs/create), and [Create and manage AI Config variations](/docs/home/ai-configs/create-variation).
You cannot run a MAB on a flag if:
 * the flag has an active [guarded rollout](/docs/home/releases/guarded-rollouts)
 * the flag has an active [progressive rollout](/docs/home/releases/progressive-rollouts)
 * the flag is in a running [Data Export experiment](/docs/home/experimentation/export)
 * the flag is in a running [warehouse native experiment](/docs/home/warehouse-native/creating)
 * the flag is a [migration flag](/docs/home/flags/migration)
You can build and run multiple MABs on the same flag or AI Config as long as there is only one running MAB per targeting rule. You cannot run multiple MABs on the same rule at the same time.
## Create metrics
Metrics measure audience behaviors affected by your flags. You can use metrics to track all kinds of things, from how often end users access a URL to how long that URL takes to load a page. You can reuse existing metrics in multiple MABs, or create new ones for your MABs.
To learn how to create your own new metric, read [Metrics](/docs/home/metrics). LaunchDarkly also automatically creates metrics for AI Configs. To learn more, read [Metrics generated from AI SDK events](/docs/home/metrics/autogen-metrics#metrics-autogenerated-from-ai-sdk-events).
##### Multi-armed bandits do not support metrics using percentile analysis methods
Multi-armed bandits support metrics using the “Average” [metric analysis method](/docs/home/metrics/metric-analysis#analysis-method). You cannot use metrics using a percentile analysis method with a multi-armed bandit.
If you want to learn which variation performs better, it must be possible for that metric to measure something in all of the variations within the MAB. To learn more, read [Metrics and flag variations](/docs/guides/experimentation/designing-experiments#metrics-and-variations).
## Build multi-armed bandits
You can view all of the MABs in your environment on the **Multi-armed bandits** list.
To build a MAB:
 1. Click **Create** , then choose **Multi-armed bandits**. A “Create multi-armed bandit” dialog appears.
 2. Enter a **Name**.
 3. Enter a **Goal**.
 4. Click **Create multi-armed bandit**. The **Design** tab opens.
 5. Choose a context kind to **Randomize by**.
 6. Select a **Metric**.
 * Hover over a metric to see which environments have received events for it. If no environments are receiving events, check that your SDKs are configured correctly.
 * Click **Create** to create and use a new metric.
 7. Choose a **Flag or AI Config**.
 * Click **Create flag** or **Create AI Config** to create and use a new flag or AI Config.
 8. Choose a targeting rule for the **Experiment audience**.
 * If you want to restrict your audience to only contexts with certain attributes, create a targeting rule on the flag or AI Config you include in the MAB and run the MAB on that rule.
 * If you don’t want to restrict the audience for your MAB, run the MAB on the default rule. If the flag or AI Config doesn’t have any targeting rules, the default rule will be the only option.
![The "Audience targeting" section with the default rule chosen.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/39503b0adb7e876fa64cde29342d11ab9b06de5c05a2218fe8c06f7057729d77/assets/images/__toPlaywright_newIA/experiment-builder-define-audience.png)
The "Audience targeting" section with the default rule chosen.
 1. (Optional) If you want to [exclude contexts in this MAB](/docs/home/experimentation/mutually-exclusive) from certain other MABs and experiments, click **Add experiment to exclusion layer** and select a layer.
###### Expand layer options
A [layer](/docs/home/experimentation/mutually-exclusive) is a set of experiments and MABs that cannot share traffic with each other. All of the experiments and MABs within a layer are mutually exclusive, which means that if a context is included in one, LaunchDarkly will exclude it from any other experiments and MABs in the same layer.
To add the MAB to an existing layer:
 1. Click **Select layer**.
 2. Search for and choose the layer you want to add the MAB to.
 3. Enter a **Reservation** amount. This is the percentage of the contexts within this layer you want LaunchDarkly to include in this MAB.
 4. Click **Save layer**.
If you need to create a new layer:
 1. Click **Create layer**.
 2. Add a **Name** and **Description**.
 3. Click **Create layer**.
 4. Enter a **Reservation** amount. This is the percentage of the contexts within this layer you want LaunchDarkly to include in this MAB.
 5. Click **Save layer**.
 1. Select a **Variation served to users outside this experiment**.
 2. Select the **Sample size** for the MAB. This is the percentage of all of the contexts that match the MAB’s targeting rule that you want to include in the MAB.
 3. Select your desired **Update frequency**. This determines how often the MAB shifts traffic to the leading variation.
 4. By default, starting traffic is split equally between all of the included variations. If you want to exclude a variation from the MAB:
 * Click **Edit** next to “Variations split.”
 * For any variation you want to exclude, change the percentage to 0%.
 * Click **Save audience split**.
 5. (Optional) If you want to include the MAB in a [holdout](/docs/home/holdouts), select a **Holdout** name.
##### Multi-armed bandits cannot be in a holdout and in a layer at the same time
Multi-armed bandits can either be in a holdout or in a layer, but not both. If you added the multi-armed bandit to a layer, you will not see the option to add it to a holdout.
 1. Scroll to the top of the page and click **Save**.
If needed, you can save your in-progress MAB design to finish later. To save your design, click **Save** at the top of the creation screen. Your in-progress MAB design is saved and appears on the **Multi-armed bandits** list. To finish building the MAB, click on the MAB’s name and continue editing.
After you have created your MAB, the next step is to toggle on the flag. AI Configs are on by default. Then, you can start an iteration.
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/openapi-logo.svg)
You can also use the REST API: [Create experiment](/docs/api/experiments/create-experiment)
## Turn on flags or AI Configs
For a MAB to begin recording data, the flag or AI Config used in the MAB must be on. Targeting rules for AI Configs are on by default. To learn how to turn targeting rules on for flags, read [Turning flags on and off](/docs/home/flags/toggle).
## Start iterations
After you create a MAB and toggle on the flag, you can start a MAB iteration in one or more environments. AI Configs are on by default.
To start a MAB iteration:
 1. Navigate to the **Multi-armed bandits** list.
 2. Click on the environment section containing the MAB you want to start.
 * If the environment you need isn’t visible, click the **+** next to the list of environment sections. Search for the environment you want, and select it from the list.
![The environment selection menu.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/34b4f0b3517652a1d52892a144f582c4acfeb5b49bfaf2ffee688fca284f3ce6/assets/images/auto/environment-selection.auto.png)
The environment selection menu.
 1. Click on the name of the MAB you want to start an iteration for. The **Design** tab appears.
 2. Click **Start**.
 3. Repeat steps 1-4 for each environment you want to start an iteration in.
![A multi-armed bandit with the "Start" button called out.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a0d636be85b695b5cbd7237c19710ec394791d961fbcd058158c85205e4d59a7/assets/images/__toPlaywright_newIA/mab-details-start-callout.png)
A multi-armed bandit with the "Start" button called out.
You can run a MAB indefinitely, allowing it to reallocate traffic as needed. If you are running a MAB on a time-boxed feature, such as a holiday promotion, then you can stop the MAB iteration when the promotion is over.
When you start an iteration of a MAB, LaunchDarkly sends the maintainer and anyone following the MAB an email, an in-app notification, and, if you have the Slack app integration configured, a Slack notification.
To learn more about starting and stopping iterations, read [Starting and stopping experiment iterations](/docs/home/experimentation/start-stop-exp).
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/openapi-logo.svg)
You can also use the REST API: [Create iteration](/docs/api/experiments/create-iteration)
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs