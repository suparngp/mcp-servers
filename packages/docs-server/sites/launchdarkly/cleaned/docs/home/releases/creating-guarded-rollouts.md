`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [What happens when a guarded or progressive rollout starts or stops](#what-happens-when-a-guarded-or-progressive-rollout-starts-or-stops)
 * [Prerequisites](#prerequisites)
 * [Choose a context kind](#choose-a-context-kind)
 * [Create metrics](#create-metrics)
 * [Determine regression thresholds](#determine-regression-thresholds)
 * [Rollout duration](#rollout-duration)
 * [Create guarded rollouts on flags and AI Configs](#create-guarded-rollouts-on-flags-and-ai-configs)
 * [Open the rollout setup](#open-the-rollout-setup)
 * [Configure rollout details](#configure-rollout-details)
 * [(Optional) Schedule and request approval](#optional-schedule-and-request-approval)
 * [Review rollout status](#review-rollout-status)
 * [How metrics are displayed](#how-metrics-are-displayed)
## Overview
This topic explains how to create a guarded rollout. Guarded rollouts let you progressively increase traffic to a flag or AI Config variation over time while monitoring chosen metrics for regressions. If LaunchDarkly detects a regression, it can pause the release and send you a notification.
##### Guarded rollouts availability
All LaunchDarkly accounts include a limited trial of guarded rollouts. Use this to evaluate the feature in real-world releases.
## What happens when a guarded or progressive rollout starts or stops
Guarded rollouts and progressive rollouts use randomized traffic allocation to determine which contexts receive a new variation. Before you create a rollout, understand how context targeting behaves when stopping and restarting the rollout.
If you stop a guarded rollout or progressive rollout and later create a new one on the same flag or AI Config variation, LaunchDarkly may serve the variation to a different set of contexts than in the original rollout. This happens because each new guarded or progressive rollout independently assigns contexts to receive the variation, based on the selected randomization unit.
This behavior is different from flag percentage rollouts, which retain the same set of contexts when you stop and restart them. The same contexts continue to receive the variation, provided the flag configuration and context kind remain unchanged.
## Prerequisites
To create a guarded rollout, you should first complete the following prerequisites:
### Choose a context kind
You must choose a context kind for the rollout to gradually ramp up traffic to the new flag or AI Config variation.
If this is your first guarded rollout, read [Setting up contexts for guarded rollouts](/docs/home/releases/context-kinds) to learn more about best practices for setting up and choosing contexts.
### Create metrics
Before you begin a guarded rollout, choose one or more existing metrics or create new ones to monitor. To learn how, read [Creating and managing metrics](/docs/home/metrics/create-metrics).
### Determine regression thresholds
For each metric you use in the guarded rollout, you can use the LaunchDarkly default regression threshold or set a custom one:
 * The **Default** option uses LaunchDarkly’s standard regression threshold. This option is appropriate for most guarded rollouts.
 * The **Set custom thresholds** option lets you define how much underperformance you’re willing to tolerate in the new variation. LaunchDarkly employs a Bayesian statistical model to assess the probability of a new variation performing worse than the original variation. This model applies to all metrics, whether they use average or percentile analysis methods.
To learn more, read [Regression thresholds for guarded rollouts](/docs/home/releases/regression-thresholds).
### Rollout duration
LaunchDarkly evaluates how the treatment variation is performing over a specified time period. You can use the default duration or set a custom schedule. If the variation isn’t exposed to enough contexts during this period, LaunchDarkly will roll back the change.
## Create guarded rollouts on flags and AI Configs
You can create a guarded rollout on a flag or AI Config:
 * When you toggle the flag or AI Config on and begin serving a new variation
 * If the flag or AI Config is already toggled on, when you make a change to a variation
You can create a guarded rollout on any targeting rule, as long as there are no other guarded rollouts, [progressive rollouts](/docs/home/releases/progressive-rollouts), or [experiments](/docs/home/experimentation) running on the flag or AI Config, and the flag is not a [migration flag](/docs/home/flags/migration).
![A guarded rollout with a health warning.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/b0c27f72a80ef79d1067f6dda419a2500a2068845e8c887fec0c83a2bfcff06a/assets/images/__LD_UI_no_test/guarded-rollout-health-check.png)
A guarded rollout with a health warning.
##### Custom context kinds must be available for guarded rollouts
If you want to use a custom context kind as a randomization unit in a guarded rollout, the **Available for experiments and guarded rollouts** checkbox must be checked in the context kind configuration. To learn how, read [Edit context kinds](/docs/home/flags/context-kinds-create#edit-context-kinds).
Follow the steps below to set up a guarded rollout.
### Open the rollout setup
 1. Navigate to the **Targeting** tab for the flag or AI Config.
 2. Find the targeting rule for which you want to create a guarded rollout and click **Edit**.
 3. From the **Serve** menu, select **Guarded rollout**. The guarded rollout setup options appear.
 4. Next to **Guarded rollout setup** , click **Health warnings** to check for any issues with your flag, AI Config, or metric that could prevent LaunchDarkly from monitoring the health of your rollout. To learn more, read [Health checks for guarded rollouts](/docs/home/releases/health-checks).
![A guarded rollout with a health warning.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/b0c27f72a80ef79d1067f6dda419a2500a2068845e8c887fec0c83a2bfcff06a/assets/images/__LD_UI_no_test/guarded-rollout-health-check.png)
A guarded rollout with a health warning.
### Configure rollout details
 1. From the **Target variation** menu, select the variation to gradually roll out.
 2. Choose a context kind to determine how to assign traffic to variations. This context kind is called a randomization unit.
 3. Select one or more **Metrics to monitor**.
 4. Under **Regression detection and behavior** , define how much worse the target variation can perform compared to the original variation before LaunchDarkly detects a regression.
 * Check **Automatic rollback** if you want LaunchDarkly to automatically revert your change when it detects a regression, in addition to sending a notification. LaunchDarkly always rolls back a release automatically if it detects a [sample ratio mismatch (SRM)](/docs/guides/statistical-methodology/sample-ratios) or if the release has not been exposed to enough contexts by the end of the rollout period.
![The guarded rollout setup options on a flag rule.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a2132c6a5cd28832b2fba2eac72cacdfe495f8dfaaf843e2dd35f08d34142557/assets/images/__toPlaywright_newIA/flag-targeting-add-rollout-menu-new.png)
The guarded rollout setup options on a flag rule.
 1. Select a **Rollout duration**. You can use the default duration or set a custom schedule. LaunchDarkly automatically increases the percentage of contexts receiving the new variation over the course of the rollout duration until it reaches 100%.
 2. Click **Review and save**.
##### Guarded rollouts cannot use warehouse native metrics
If you use [warehouse native Experimentation](/docs/home/warehouse-native), you may have configured [warehouse native metrics](/docs/home/warehouse-native/metrics) to use events from an external warehouse. You cannot use warehouse native metrics with a guarded rollout.
### (Optional) Schedule and request approval
 1. Click **Request approval**. The “Save changes” dialog appears.
 2. Review and confirm the changes displayed in the dialog.
 3. Enter a **Comment** to provide context for reviewers. If your organization uses a third-party workflow management system for approvals, there may be additional fields you are required to complete. To learn more, read [Configuring approvals for an environment](/docs/home/releases/approval-config).
 4. Choose one or more reviewers from the **Reviewers** menu.
 * Members and teams with permission to approve or decline requests appear in the top section of the menu.
 * Members and teams that can only view approval requests appear in the bottom section. If you add one of these members or teams, they will be notified but cannot approve the request.
 5. To schedule the rollout start time:
 * Click the **dropdown** icon in the **Review and save** button.
 * Choose a pre-selected or custom date and time.
 * If you select a custom date and time, select a date, time, and timezone for when you want the changes to execute, or click on the **calendar** icon to expand a calendar view.
 6. Click **Schedule changes**.
![The guarded rollout scheduling option.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/41123307d3d2ae4e0a0f4121b9db59fc3f3995d634ad3774969cbc65063c622c/assets/images/__LD_UI_no_test/guarded-rollout-schedule-changes.png)
The guarded rollout scheduling option.
### Review rollout status
After saving, the rule displays the percentage of contexts that have been exposed to the new variation.
![A flag rule with a guarded rollout.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a6f07296ea344fa71e3d98a47f0f578b248b7aa538a2edb51bb2236cde7fcd12/assets/images/__LD_UI_no_test/guarded-rollout-default-rule.png)
A flag rule with a guarded rollout.
##### Minimum context requirement for guarded rollouts
A new flag or AI Config variation must be evaluated by a minimum number of contexts during each step of a guarded rollout. If this minimum sample size for guarded rollouts is not met, LaunchDarkly automatically rolls back the change.
The top of the **Targeting** tab for the flag or AI Config displays the current rollout status. To view more details about the rollout, click the **Monitoring** tab. To learn more, read [Managing guarded rollouts](/docs/home/releases/managing-guarded-rollouts).
If LaunchDarkly detects a regression, it sends an email, an in-app notification, and, if configured, a Slack, Microsoft Teams, or PagerDuty notification. To learn how to set up these integrations, read:
 * [Setting up Slack accounts and permissions](/docs/integrations/slack/setting-up)
 * [Setting up the Microsoft Teams integration](/docs/integrations/microsoft-teams/setting-up)
 * [PagerDuty for guarded rollouts](/docs/integrations/pagerduty-guardian-edition)
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/openapi-logo.svg)
You can also use the REST API: [Update feature flag](/docs/api/feature-flags/patch-feature-flag), [Update AI Config](/docs/api/ai-configs-beta/patch-ai-config)
## How metrics are displayed
In a guarded rollout, each metric appears in its own tile. Each tile contains a relative difference chart.
Each metric tile includes:
 * **Header** : Identifies the metric. Shows the metric name and the current relative difference estimate. You can hover over the metric name to view its definition and description, the environment and time when it was last seen, and a link to the metric details page.
 * **Chart** : Shows the relative difference between treatment and control over time. The line is the relative difference as a percentage, with a shaded grey area for confidence interval and a dotted line for the regression threshold. If the entire credible interval goes above the threshold line for lower-is-better metrics, or below the threshold line for higher-is-better metrics, LaunchDarkly calls a regression. When this happens, the tile highlights the regression, and if automatic rollback is enabled, LaunchDarkly reverts the rollout.
 * **Footer** : Summarizes the most recent results. Shows the latest values for both treatment and control.
On the **Targeting** tab, metric tiles appear in up to three columns in a single row. If you have more metrics than fit in one row, click **Show all metrics** to expand the view. Hovering over a chart shows a pop-up with the relative difference between treatment and control at that time.
![Relative difference chart on the Targeting tab.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/3750f35f3972f6156da32e7fabd3782c991405d83c67c1160d0b6dc3fbdaf2ab/assets/images/__LD_UI_no_test/relative-difference-targeting.png)
Relative difference chart on the Targeting tab.
On the **Monitoring** tab, each metric appears on its own tab. Hovering over the chart shows control and treatment estimates, confidence interval, and exposures at that point in time.
##### Relative difference charts availability
Relative difference charts are only available for guarded rollouts. Progressive rollouts and experiments use different visualization methods.
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs