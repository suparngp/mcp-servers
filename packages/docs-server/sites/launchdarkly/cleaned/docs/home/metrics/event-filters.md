`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [Benefits of filters](#benefits-of-filters)
 * [Filter options](#filter-options)
 * [Example: Users in Canada who made a purchase](#example-users-in-canada-who-made-a-purchase)
 * [Filter evaluation](#filter-evaluation)
 * [Context attribute filters](#context-attribute-filters)
 * [Event property filters](#event-property-filters)
 * [Add a filter to a custom metric](#add-a-filter-to-a-custom-metric)
## Overview
This topic explains how to use filters to include only specific custom events in a metric, based on context attributes or event properties. You can create and apply filters directly in the LaunchDarkly user interface (UI) without changing your event instrumentation.
Instead of sending different events for each value of a context attribute or event property, you can send a single custom event and define multiple metrics from it by applying filters.
For example, if you send a `purchaseCompleted` event with a `productCategory` property, you can define one metric that includes only purchases of widgets and another that includes only purchases of gizmos. You do not need to change your instrumentation or send separate events.
![A second metric using the same event key, filtered to include only events where productCategory is gizmo.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/9715902a14e16e251d5576baedaf6b81228fe2b668c78606e0a44f8328913ba2/assets/images/__toPlaywright_newIA/filter-event-gizmo.png)
A second metric using the same event key, filtered to include only events where `productCategory` is `gizmo`.
LaunchDarkly applies a metric’s filter when it processes events during a guarded rollout or experiment. Only events that match the event key and satisfy the filter are included in the metric.
##### Filtering is only available for custom metrics
You can only apply filters to custom metrics. Metrics based on [clicked or tapped events](/docs/home/metrics/click) and [page view events](/docs/home/metrics/pageview) do not support filtering.
### Benefits of filters
Metric filters help you:
 * Define metrics for specific values of context attributes or event properties using data you already send. For example, you can define a metric to measure `purchaseCompleted` events for users where `plan = "enterprise"` or `country = "CA"`.
 * Use a single custom event to create multiple metrics, without complicating your instrumentation.
 * Change what a metric measures directly in the LaunchDarkly UI, without updating your code or redeploying.
 * Reuse filtered metrics across multiple [guarded rollouts](/docs/home/releases/guarded-rollouts) and [experiments](/docs/home/experimentation).
## Filter options
You can filter custom metrics using two types of data:
 * **Context attributes** , such as `country`, `plan`, or `deviceType`
 * **Event properties** , such as `productCategory`, `currency`, or `pageType`
Filters only match top-level key-value pairs in the `data` object of a custom event. Supported values include strings, numbers, and true or false values.
You can combine multiple filters using either `AND` or `OR`. To use both, add sub-filters.
##### Nested data is not supported
Filters do not evaluate nested data or arrays. If your event includes nested objects or arrays, LaunchDarkly ignores those fields when applying metric filters.
### Example: Users in Canada who made a purchase
To include only events from users in Canada who purchased a widget:
 * Context attribute: `user.country = "CA"`
 * Event property: `productCategory = "widget"`
You can define one metric that includes only events matching both filters.
![A metric definition that includes only events from contexts of kind user where the country is CA and the productCategory event property equals widget.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/072a2ec82d4c89fe9184a06d0ba97015a19cf0e258a21b2fb5d6131b876fd63a/assets/images/__toPlaywright_newIA/filter-ca-and-widget.png)
A metric definition that includes only events from contexts of kind `user` where the `country` is `CA` and the `productCategory` event property equals `widget`.
## Filter evaluation
LaunchDarkly evaluates metric filters when the event is received. Filters determine whether a specific event is included in the metric calculation. Filters do not affect flag targeting, flag evaluations, or exposure logic.
### Context attribute filters
Context attribute filters match data from the context that triggered the event. These filters are evaluated at the time the event is received.
### Event property filters
Event property filters match key-value pairs in the `data` field of a custom event. These filters only work if the event data is a flat JSON object that includes string, number, or boolean values.
Here is an example of a `track()` call in JavaScript:
JavaScript
```
1
| track("purchaseCompleted", {
---|--- 
2
| productCategory: "widget",
3
| currency: "USD"
4
| })
```
In this example, `productCategory` and `currency` can both be used in metric filters.
## Add a filter to a custom metric
You can add metric filters when you create a new custom metric or edit an existing one. Filters are available in the LaunchDarkly UI during metric definition.
To create a new metric with filters:
 1. Navigate to the **Metrics** list.
 2. Click **Create metric**. The “Create metric” panel appears.
 3. Select the **Custom event** kind.
 4. Search for or enter an **Event key**.
![The Create metric panel, with Custom event kind selected and event key entered.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/1414e24081aaeaca60ef860916dc7355a2114eb47bd3986905294f78bbc30b7a/assets/images/__toPlaywright_newIA/filter-event-kind-and-key.png)
The Create metric panel, with **Custom event** kind selected and event key entered.
 5. Click **Filter event by**.
 6. Select **Context attribute** or **Event property**.
 7. Define your filter condition:
 * For **Context attribute** , select the context kind, context attribute, and filter operator:
![A metric definition that includes only events from the user context kind where the country attribute is set to CA.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/d9dd600eac7d5d44ee49e38299ced26c7d7d15ec9721f4b69cc01fa637e69fc0/assets/images/__toPlaywright_newIA/filter-user-country-ca.png)
A metric definition that includes only events from the `user` context kind where the `country` attribute is set to `CA`.
 * For **Event property** , select the event property, value, and filter operator:
![A metric definition that includes only events where the productCategory event property is set to widget.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/e45bec1ece06c60fcdd9237bdb88d19a445936a3e606c1c87abcc7989a9316ed/assets/images/__toPlaywright_newIA/filter-event-widget.png)
A filter that includes only events where the `productCategory` event property is set to `widget`.
 8. (Optional) Click **Add filter** or **Add another filter** to extend your filtering logic.
![A metric definition that includes only events from contexts of kind user where the plan is enterprise or the country is CA, and the productCategory event property is widget.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/7c208a34138584a3bff7434861842b857ff6e0eb296d75c0a96963b48db3feb0/assets/images/__toPlaywright_newIA/filter-with-and-and-or.png)
A metric definition that includes only events from contexts of kind `user` where the `plan` is `enterprise` or the `country` is `CA`, and the `productCategory` event property is `widget`.
 9. Continue creating your metric according to the [create procedure for the custom metric](/docs/home/metrics/create-metrics#create-metrics).
 10. Click **Create metric**.
##### SDK compatibility
No changes are required to your SDK event tracking: LaunchDarkly applies the filters automatically when processing metric events. You do not need to change how the event is tracked in your SDK.
However, you must be using an SDK that supports inline contexts, which is a format for how the SDK sends custom event information to LaunchDarkly. To confirm that your SDK supports this, read [Supported features](/docs/sdk#supported-features). Find your SDK and look for the “Inline contexts in custom events” in the corresponding table.
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs