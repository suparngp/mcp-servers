`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [Target contexts with rules](#target-contexts-with-rules)
 * [How segment targeting works with percentages](#how-segment-targeting-works-with-percentages)
 * [Differences between flag targeting and segment targeting](#differences-between-flag-targeting-and-segment-targeting)
 * [Target individual contexts](#target-individual-contexts)
 * [Bulk edit individual contexts](#bulk-edit-individual-contexts)
 * [Schedule context removal from segments](#schedule-context-removal-from-segments)
## Overview
This topic explains how to target contexts in rule-based and smaller list-based segments. Smaller list-based segments are segments where the number of individual contexts targeted is 15,000 or fewer.
## Target contexts with rules
You can use custom targeting rules in a segment to include targets that match specific rules. Segment targeting rules function the same way as flag targeting rules. To learn more, read [Target with flags](/docs/home/flags/target).
To customize a segment’s targeting rules:
 1. Navigate to the details page of the segment you wish to modify.
 2. Click **+ Add rule** at the top of the page, or click the **+** button between existing rules. Then choose which kind of rule to add:
 * Select **Target segments** to create a targeting rule based on an existing segment.
 * In the **Operator** menu, select whether you want contexts in these segments or not in these segments to match the targeting rule.
 * In the **Segments** menu, enter or select the segments you want to target.
 * Select “Build a custom rule” to create a targeting rule based on contexts and their attributes.
 * Specify a **Context kind** , **Attribute** , **Operator** , and **Values** for the rule.
 1. (Optional) Enter a name for the rule.
 2. If you want to add more criteria, click the **+** beside the rule criteria.
![A rule on a segment.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/4749c7208f105b9c0a2f7552ed60c32639f146594dab3f0f2258e710d7aee4e6/assets/images/auto/segments-include-targets-rule-new.auto.png)
A rule on a segment.
 1. Select whether to include in the segment all contexts that match the rule, or a percentage of contexts that match the rule.
 * If you select a percentage of contexts, select a context kind and enter the percentage to include in the segment.
 1. Click **Save** or, if your environment [requires approvals](/docs/home/releases/approval-config), click **Request approval**.
To reference this rule when working with other members of your organization, click the **three-dot** overflow menu and choose **Copy link to rule**.
To remove a targeting rule from a segment, click **Edit**. Then click the **overflow** menu and select “Delete rule.”
##### Understanding segment rule logic
When you specify rules for a segment, LaunchDarkly parses them in order of appearance from top to bottom. You can change how segment targeting applies based on the order of the rules you create.
After you add targeting rules, you can also add individual contexts. To learn how, read [Target individual contexts](/docs/home/flags/rule-based-segments#target-contexts-with-rules), below.
Each segment can include up to 5,000 targeting rules and 50,000 values across all rules.
### How segment targeting works with percentages
If you target only a percentage of contexts that match your segment targeting rule, each flag that targets that segment will include the same contexts in its targeting, assuming there are no other differences between the flags’ targeting rules.
For example, imagine you configure a segment to target 50% of user contexts that match its rule:
![A segment rule targeting 50% of contexts that match the rule.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/57bad9e1687580cd8d549d6eaf6f27477e05c9f0e06a95099818894e9321dd1d/assets/images/__toPlaywright_newIA/segment-targeting-percentage.png)
A segment rule targeting 50% of contexts that match the rule.
As a result, the segment:
 * includes user contexts `A`, `B`, and `C`
 * excludes user contexts `D`, `E`, and `F`
If there are no other differences between the flags’ targeting rules, every flag that targets that segment will include user contexts `A`, `B`, and `C` in its targeting, and will exclude user contexts `D`, `E`, and `F`.
### Differences between flag targeting and segment targeting
There are some differences between flag targeting and segment targeting:
 * Segments are environment-specific. They do not populate in environments other than the one you created them in.
 * Segment targeting can reference another segment only if both segments exist in the same environment, and if you’re using a version of an SDK that supports contexts.
Like flags, you cannot create a circular reference between two segments, for example, where segment A targets segment B and segment B targets segment A.
## Target individual contexts
You can individually target contexts for inclusion in or exclusion from a segment. You can also [edit individually targeted contexts in bulk](/docs/home/flags/rule-based-segments#bulk-edit-individual-contexts), and [schedule the removal of individually targeted contexts from a segment](/docs/home/flags/rule-based-segments#schedule-context-removal-from-segments).
To individually target a context:
 1. Navigate to the details page of the segment you wish to modify.
 2. Click the **+ Add rule** button and select “Include individuals” or “Exclude individuals.”
 3. Choose the context kind for the contexts you want to target.
 * By default, the context kind is “user.”
 * To update this, click **Edit context**. In the “Select context kinds” dialog, choose one or more context kinds and click **Save**.
![The "Select context kinds" dialog with two context kinds selected.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/01f47864e6ee296c3d655e19b6f14b6fd6d2753d13786850a1b45142708f9764/assets/images/auto/targeting-available-context-kinds.auto.png)
The "Select context kinds" dialog with two context kinds selected.
 4. The “Included targets” or “Excluded targets” section updates to display the context kinds you selected.
 5. Choose contexts to include in or exclude from the segment.
 * You can search for contexts by name or key. Then, click the context name or key.
 * If you want to target a context that has not yet been encountered by LaunchDarkly, you can enter its key.
 * You cannot both include and exclude the same context.
 6. Click **Save changes** or, if your environment [requires approvals](/docs/home/releases/approval-config), click **Request approval**. The contexts are now individually targeted within the segment.
Here is an image of an individually targeted context:
![An individually targeted context included in a segment.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/4dc98ef18da7b311ecf0641d9fbb9fe2fd80d48cd4a64fdf9643b3aa1783f555/assets/images/auto/segments-targeted-context.auto.png)
An individually targeted context included in a segment.
To remove all included or excluded contexts from a segment, click **Edit** in the header of the “Included targets” or “Excluded targets” section. Then, click the **overflow menu** and select “Clear.”
![The overflow menu for the individually targeted contexts.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/717811078261ee93634a91e137a3345ada1d97a4535cad770190d68629543ccd/assets/images/auto/segments-clear-targets.auto.png)
The overflow menu for the individually targeted contexts.
After you add contexts to a list-based segment, you can also add rules. To learn how, read [Target contexts with rules](/docs/home/flags/rule-based-segments#target-contexts-with-rules), above.
## Bulk edit individual contexts
If you have a long list of contexts you want to add, remove, or replace within a segment, you can bulk edit contexts from a segment’s details page. You can only perform bulk editing tasks for one context kind at a time.
To edit individual targets in bulk:
 1. Navigate to the details page of the segment you wish to modify.
 2. In the “Included targets” or “Excluded targets” section, click **Edit** in the header of the section. Then, click the **overflow menu**.
 3. Select **Bulk edit**. The “Bulk edit targets for this segment” dialog appears.
 4. Use the action menu to select one of the following actions for the selected context kind:
 * “Add” adds the selected contexts as targets
 * “Remove” removes the selected contexts as targets
 * “Replace” replaces all currently targeted contexts with the selected contexts
 1. Use the context kind menu to select the context kind of the contexts you are targeting.
 2. Enter a list of context keys or email addresses in the **Paste target keys** field, separated by a comma or new line. LaunchDarkly looks up contexts by key or email and displays them in the list on the right. If you want to target a context that has not yet been encountered by LaunchDarkly, you must enter its key.
![The "Bulk edit targets for this segment" dialog.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/2b3727b32faebf5eca98e74dd7a21b2b6c24769b1ff7d6a11f2a3e600b89736a/assets/images/auto/segments-bulk-editing.auto.png)
The "Bulk edit targets for this segment" dialog.
You can update the list on the right before you perform the selected action. The options for updating the list include the following:
 * **All** represents all of the contexts that may be impacted by the action, whether they are added or removed. Check the context’s checkbox for the action to apply.
 * **The checkmark** represents inputted context keys that currently match contexts in the system. For example, if you enter the context key `context-key-123abc`, and `context-key-123abc` already exists in LaunchDarkly, it will show up in this list.
 * **The question mark** represents contexts with no matching records in LaunchDarkly. If you are adding contexts and the contexts do not currently exist in LaunchDarkly, they will be added to the targeting list.
 * **The exclamation mark** represents context key inputs with multiple matching records. For example, if you enter the email address `sandy@example.com`, but there are multiple context keys that have `sandy@example.com` as an email address, the system may return multiple matching records. You can select the correct record by clicking the checkbox.
 * **Current** lists all of the currently targeted contexts for the segment.
 1. Click **Add targets** , **Remove targets** , or **Replace targets** to perform the selected action.
## Schedule context removal from segments
##### Scheduling removal dates is available to customers on select plans
Scheduling removal dates is only available to customers on select plans. To learn more, [read about our pricing](https://launchdarkly.com/pricing/). To upgrade your plan, [contact Sales](https://launchdarkly.com/contact-sales/).
You can schedule an expiration date and time on which LaunchDarkly removes a context from a segment. You can do this for existing contexts, or when you add a context to a segment.
This is useful if you want to give contexts temporary access to a feature that has their segment targeted. The ability to remove contexts from segments, instead of flag targeting, allows you to keep your flag’s targeting rules permanent and clean.
To set a targeting removal date:
 1. Navigate to the details page of the segment you wish to modify.
 2. In the “Included targets” or “Excluded targets” section, click the **calendar** icon on the context you want to remove:
![A context with the calendar icon called out.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/3b424eb216379d919245d5f6b2425adb571b4b35776ed8653eaacc12ee220388/assets/images/auto/segments-schedule-context.auto.png)
A context with the calendar icon called out.
 1. In the “Schedule removal” dialog, set a date and time for the context to be removed from the segment.
 2. Click **Save** or, if your environment [requires approvals](/docs/home/releases/approval-config), click **Request approval**.
Additionally, when you add a context to a segment, you can schedule it for removal later by clicking **Add and schedule removal**.
Here is an image of the targeting field:
![The targeting field with the "Add and schedule removal" option called out.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/d103579c04d174d2b6124fe6aa2c31fd69b3d494800667e36a45437de1e83cc7/assets/images/auto/segments-add-and-schedule-callout.auto.png)
The targeting field with the "Add and schedule removal" option called out.
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/openapi-logo.svg)
You can also use the REST API: [Update expiring targets for segment](/docs/api/segments/patch-expiring-targets-for-segment)
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs