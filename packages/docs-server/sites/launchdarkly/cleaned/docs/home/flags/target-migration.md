`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [Targeting variations and stages](#targeting-variations-and-stages)
 * [Targeting cohorts](#targeting-cohorts)
 * [Targeting contexts](#targeting-contexts)
 * [Migration flags’ off variations](#migration-flags-off-variations)
 * [Understanding restrictions for migration flags with six stages](#understanding-restrictions-for-migration-flags-with-six-stages)
 * [Understanding potential migration issues](#understanding-potential-migration-issues)
## Overview
This topic explains how to target contexts with migration flags.
## Targeting variations and stages
The different stages of a migration flag are expressed by the flag’s variations. Migration flags have built-in variations that you cannot edit, because they are linked to the migration’s stages. To progress through stages in a migration, adjust the percentage rollout to serve a different variation to a larger group, until 100% of contexts receive the same variation. We recommend progressing through the stages in the order they’re presented.
## Targeting cohorts
Migration flag cohorts are analogous to the targeting rules for other types of feature flags. The default cohort is analogous to the default rule.
You can target cohorts in mostly the same ways you target rules, but cohorts always serve a percentage rollout. This helps visualize the progress of a migration. To learn more about rollouts, read [Percentage rollouts](/docs/home/releases/percentage-rollouts).
You must specify a default cohort that this flag targets when the contexts specified in it are not a part of any other cohort. We recommend allocating 100% of this cohort in the “off” stage.
Here’s how to create a cohort:
 1. Navigate to a migration flag’s **Targeting** tab.
 2. Click the **+** icon and choose “Target segments” or “Build a custom rule.”
 3. Configure the cohort’s targeting information. To learn more, read [Target with flags](/docs/home/flags/target).
 4. In the “Serve” section, allocate the cohort into flag variations by percentages between 0 and one hundred. The total number in all stages must equal one hundred.
![The cohort creation menu for a six-stage migration flag.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/d19255cdbbf10f44d4b04acc5446b2ec1af86db2b3bba8213b6602d24bd98fd2/assets/images/auto/migration-cohort-create.auto.png)
The cohort creation menu for a six-stage migration flag.
### Targeting contexts
You cannot target individual contexts with a migration flag. If you need to target an individual context, create a cohort that contains only that context.
### Migration flags’ off variations
The off variation for a migration flag is always `off`. This ensures that migrations always begin in the correct stage.
## Understanding restrictions for migration flags with six stages
Migrations with six stages require you to specify a context kind to represent how the migrated data is partitioned. This context kind only targets contexts for the migration flag.
Migration flags with six stages have the following restrictions:
 * When you adjust a rollout, it will only affect keys for the context kind you designated for the six-stage migration
 * You can only create cohort clauses that reference that context kind
 * Cohorts cannot use the `segmentMatch` operator because segments can reference other context kinds
 * You cannot add prerequisites, because they can reference other context kinds
To learn more about when to use two, four, or six-stage migrations, read [Performing multi-stage migrations with migration flags](/docs/guides/flags/migrations).
## Understanding potential migration issues
Some targeting actions may create issues that could impact your data integrity. If a scenario like this occurs, a warning appears when you try to save.
Examples of actions that may cause safety issues are:
 * Adding a cohort that causes reads from the new system when a later cohort is not backfilled or in the `off` stage
 * Removing a cohort that is not backfilled or in the `off` stage when a later cohort causes reads
 * Reordering a cohort that is not backfilled or in the `off` stage when a later cohort (from its old position) causes reads from the new system
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/openapi-logo.svg)
You can also use the REST API: [Get migration safety issues](/docs/api/feature-flags/post-migration-safety-issues)
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs