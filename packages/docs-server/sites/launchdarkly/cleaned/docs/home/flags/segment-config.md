`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [Set up a synced or list-based segment for use with a server-side SDK](#set-up-a-synced-or-list-based-segment-for-use-with-a-server-side-sdk)
 * [Configure a persistent store](#configure-a-persistent-store)
 * [Implementation considerations when using a persistent store](#implementation-considerations-when-using-a-persistent-store)
 * [Configure a persistent store integration](#configure-a-persistent-store-integration)
 * [Configure the Relay Proxy](#configure-the-relay-proxy)
 * [Configure server-side SDKs](#configure-server-side-sdks)
 * [Review and edit the persistent store integration](#review-and-edit-the-persistent-store-integration)
##### Synced segments and larger list-based segments are available to customers on select plans
[Segments synced from external tools](/docs/home/flags/synced-segments) and [larger list-based segments](/docs/home/flags/segment-types#larger-list-based-segments) are the two kinds of “big segment.” These segments are only available to customers on select plans. To learn more, [read about our pricing](https://launchdarkly.com/pricing/). To upgrade your plan, [contact Sales](https://launchdarkly.com/contact-sales/).
## Overview
This topic explains the configuration process and requirements for synced segments and larger list-based segments.
You may be familiar with the concept of a “big segment,” which is a term we previously emphasized in the LaunchDarkly documentation and user interface (UI) to describe some segments.
These segments are either:
 * a synced segment, or
 * a list-based segment with more than 15,000 entries that includes only one targeted [context kind](/docs/home/flags/context-kinds).
LaunchDarkly uses different implementations for different types of segments so that all of your segments have good performance. Because the implementation for these segments is different than for [rule-based segments and smaller list-based segments](/docs/home/flags/segment-types), there is some additional configuration work that you must complete before you can create one of these segments for the first time. This topic describes that configuration work.
You only need to perform the configuration steps in this topic if you wish to use these segments with a server-side SDK. Client-side SDKs support these types of segments by default. These types of segments are not supported on edge SDKs.
## Set up a synced or list-based segment for use with a server-side SDK
For server-side SDKs, these segments require a persistent store within your infrastructure. LaunchDarkly keeps the persistent store up to date and consults it during flag evaluation.
To configure and use a persistent store to use segments with a server-side SDK, you must complete the following steps:
 * [Configure a persistent store](/docs/home/flags/segment-config#configure-a-persistent-store)
 * [Configure a persistent store integration](/docs/home/flags/segment-config#configure-a-persistent-store-integration) or [Configure the Relay Proxy](/docs/home/flags/segment-config#configure-the-relay-proxy)
 * [Configure server-side SDKs](/docs/home/flags/segment-config#configure-server-side-sdks)
 * [Review and edit the integration](/docs/home/flags/segment-config#review-and-edit-the-persistent-store-integration) as needed, including reviewing its connection status
## Configure a persistent store
If you are using server-side SDKs, synced segments and larger list-based segments require a persistent store within your infrastructure. You can use either Redis or DynamoDB. We recommend using a dedicated Redis database or DynamoDB table.
LaunchDarkly stores the segments’ context keys in the persistent store, keeps the persistent store up to date, and consults it during flag evaluation.
If you are using Redis, you will need to know:
 * Your Redis host
 * Your Redis port
 * Your Redis username, if any
 * Your Redis password
 * Whether or not LaunchDarkly should connect using TLS.
###### Expand Redis user permissions
Your redis user will need permissions to perform at least these operations:
 * `GET`
 * `SET`
 * `SADD`
 * `SREM`
 * `DEL`
 * `WATCH`
 * `PING`
 * `MULTI`
 * `EXEC`
If you are using DynamoDB, you will need to know:
 * Your DynamoDB table name. The table must have the following schema:
 * Partition key: `namespace` (string)
 * Sort key: `key` (string)
 * Your DynamoDB Amazon Web Services (AWS) region.
 * Your AWS role Amazon Resource Name (ARN). This is the role that LaunchDarkly will assume to manage your DynamoDB table.
 * An External Id to connect your AWS role with LaunchDarkly. LaunchDarkly provides this when you configure the persistent store integration.
###### Expand Creating the AWS role
To create your AWS role:
 1. In your AWS account, create an [IAM Policy](https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html) that grants the following actions on your DynamoDB table:
 * `ConditionCheckItem`
 * `GetItem`
 * `PutItem`
 * `UpdateItem`
 1. In your AWS account, [create a role](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html) for LaunchDarkly to assume:
 * Select “AWS Account” as the **Trusted entity type** and use the account ID `554582317989`
 * Check the **Require external ID** checkbox. Enter the **External Id** that LaunchDarkly provides in the persistent store integration configuration panel.
 * Attach the IAM policy you created in the previous step.
![The "External Id" field from LaunchDarkly's "Create configuration" panel.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/92782aa92212d6d20dde9c6d2b2db91373dee9b8d4b5ec0bc1468868416559e8/assets/images/auto/big-seg-store-dynamodb-external-id.auto.png)
The "External Id" field from LaunchDarkly's "Create configuration" panel.
Whichever persistent store you use, you may also need to add the `outboundAddresses` from the LaunchDarkly public IP list to your infrastructure’s firewall. To learn more, read [Public IP list](/docs/home/infrastructure/ip-list).
LaunchDarkly keeps the persistent store up to date, using either a persistent store integration or the Relay Proxy. You must configure one or the other. Then, LaunchDarkly consults the persistent store during flag evaluation.
### Implementation considerations when using a persistent store
There are a few implementation considerations to keep in mind when you are using a persistent store for segments:
 * We recommend using a dedicated Redis database or DynamoDB table. The [persistent store integration](/docs/home/flags/segment-config#configure-a-persistent-store-integration) will have read and write access to this.
 * If you are using AWS, we recommend using DynamoDB as your persistent feature store, rather than Redis, because DynamoDB is fully managed by AWS. This means any provisioning of larger hosts happens automatically as your segment data scales.
 * The feature store and persistent store configurations for your SDK are separate. If you are using a feature store for your SDK, you can use either the same or a different persistent store for your segments. For example, if you configure your SDK to use Redis for a feature store, you can still configure it to use DynamoDB for the persistent store for segments. To learn more, read [Storing data](/docs/sdk/features/storing-data) and [Big segments](/docs/sdk/features/big-segments) in the [SDK features](/docs/sdk/features) documentation.
There are also a few performance considerations to keep in mind when you are using a persistent store for segments:
 * LaunchDarkly uses the persistent store to hold the context keys of the contexts in your segments.
 * For synced segments, the set of context keys is updated regularly. The cadence of this update is determined by the external tool you are using, such as Amplitude or Twilio Segment Audiences. The persistent store integration displays when the most recent sync occurred. To learn more, read [Review and edit the persistent store integration](/docs/home/flags/segment-config#review-and-edit-the-persistent-store-integration) and [Update synced segments](/docs/home/flags/synced-segments#update-synced-segments).
 * For performance reasons, we recommend that your persistent store is co-located with your application. You can use multiple persistent stores if you host your application in multiple regions.
## Configure a persistent store integration
Configuring a persistent store integration is the easiest way to ensure that LaunchDarkly keeps your synced segments and larger list-based segments up to date.
Here’s how:
 1. Click the **gear** icon in the left sidenav to view Organization settings.
 2. Click **Integrations**.
 3. Find the integration for your persistent store. You can search for “DynamoDB” or “Redis.”
 4. Click **Add integration**. A “Create configuration” panel appears.
 5. Set the **Status** of the integration to **On**.
 6. (Optional) Enter a **Name** for the integration.
 7. Choose an environment from the **Environment** menu. This should match the environment where your segments are created. It cannot be changed after you create the integration.
 8. Enter information specific to your persistent store.
 * For Redis, this includes the Redis host, port, username, password, and whether LaunchDarkly should connect using TLS.
 * For DynamoDB, this includes the DynamoDB table name, AWS region, and AWS role ARN.
 1. After reading the Integration Terms and Conditions, check the **I have read and agree to the Integration Terms and Conditions** checkbox.
 2. Click **Save configuration**.
![The "Create configuration" panel for a DynamoDB integration.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a04486f26bb040510e1cb4c434c6048851e0b7fc0599a0724fa594bbd691fccf/assets/images/auto/big-segment-store-dynamodb-config.auto.png)
The "Create configuration" panel for a DynamoDB integration. 
After your persistent store integration is configured, LaunchDarkly automatically keeps the persistent store up to date. For larger list-based segments, LaunchDarkly writes the segment contents to your persistent store when you create or update segments. For synced segments, LaunchDarkly writes the segment contents from your external tool to your persistent store. The segment data that is persisted to your infrastructure contains hashed values of context keys and LaunchDarkly segment keys. In both cases, the segment contents are readily available within your infrastructure, and LaunchDarkly consults your persistent store automatically during flag evaluation.
##### Flag evaluations are dependent on synced segments
Flag evaluation references the segment contents in your persistent store. If your application evaluates flags that target segments while those segments are in the process of being synced with the external tool, the flag evaluation may be out of date for the time it takes to complete the syncing process. The LaunchDarkly SDKs log a warning in this situation.
## Configure the Relay Proxy
You are not required to use the Relay Proxy to configure synced segments or larger list-based segments. You can use a persistent store integration instead.
We recommend using the Relay Proxy in certain situations. The Relay Proxy is not appropriate for all customer configurations. To learn more about if using the Relay Proxy is right for you, read [Determining whether to use the Relay Proxy](/docs/sdk/relay-proxy/determining).
If you are already using the Relay Proxy with DynamoDB or Redis, you may decide to use it for your segments infrastructure as well. To learn how, read [Configuring the Relay Proxy for segments](/docs/sdk/relay-proxy/sdk-config#configuring-the-relay-proxy-for-segments).
## Configure server-side SDKs
If you are using server-side SDKs, you must use an SDK version that supports big segments, and you must configure your SDK to use the persistent store that you have configured above, either through a persistent store integration or through the Relay Proxy.
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/terminal.svg)
Configure your SDK: [Big segments](/docs/sdk/features/big-segments)
If you are using client-side SDKs, no persistent store, integration, or additional setup is required.
## Review and edit the persistent store integration
You can review the status of your persistent store integration, and edit the configuration if needed. Here’s how:
 1. Click the **gear** icon in the left sidenav to view Organization settings.
 2. Click **Integrations**.
 3. Find the integration for your persistent store. You can search for “DynamoDB” or “Redis,” or for the name of your persistent store integration.
From here, you can review the configuration for this integration. This includes the following information:
 * “Configuration name” column with the configuration name, project, and environment.
 * “State” column with information on whether the persistent store integration is currently in sync with the segments in the LaunchDarkly environment.
 * A state of “Healthy” means that the data in your persistent store matches the data in LaunchDarkly.
 * Click “See error” to view details of any error. You can also find this information by clicking the **overflow** menu and choosing “View error log.”
 * “Last successful sync” column with a timestamp of when the most recent sync occurred between the persistent store integration and the LaunchDarkly environment.
![The configuration for a Redis persistent store integration.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a96686e3e4c80aab8f475d2d99ab7d1f5edbf3f09072f1818b748f511a996152/assets/images/auto/big-segment-store-redis-integrations-list.auto.png)
The configuration for a Redis persistent store integration.
To edit the integration:
 1. Click the **overflow** menu for your persistent store integration and choose “Edit integration configuration.”
 2. In the panel, you can update the **Status** , **Name** , and some details specific to your persistent store integration.
 3. When you are finished, click **Save configuration**.
To delete the integration:
 1. Click the **overflow** menu for your persistent store integration and choose “Edit integration configuration.”
 2. In the panel, find the “Delete configuration” section.
 3. Click **Delete**.
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs