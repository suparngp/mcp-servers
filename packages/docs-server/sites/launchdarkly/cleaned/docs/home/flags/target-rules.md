`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [About targeting rules](#about-targeting-rules)
 * [Rollouts](#rollouts)
 * [Attributes](#attributes)
 * [Operators](#operators)
 * [Regular expression compatibility across SDKs](#regular-expression-compatibility-across-sdks)
 * [Types of targeting](#types-of-targeting)
 * [Evaluation order](#evaluation-order)
 * [Reorder rules](#reorder-rules)
 * [Rule duplication](#rule-duplication)
## Overview
This topic explains how to use flag targeting rules to serve flag variations to different contexts based on their attributes.
## About targeting rules
Targeting rules, including the default rule, are all listed on a feature flag’s **Targeting** tab. You can also use the quick add buttons at the top of the **Targeting** tab to start different kinds of [rollouts](/docs/home/flags/target-rules#rollouts) or a new [experiment](/docs/home/experimentation).
Each targeting rule includes a description, one or more conditions, and a rollout.
Each condition has three parts:
 * Context **kind** and **attribute** information, which defines the scope of the condition’s impact.
 * For segment rules, this is always “context,” because segment rules check whether a context is part of a segment.
 * For mobile rules, this is always the application or device context **kind** , and then an **attribute** that you select.
 * For custom rules, this is the context **kind** and **attribute** that you select, such as “user” and “email address.” To learn more, read [Attributes](/docs/home/flags/target-rules#attributes).
 * An **operator** , which sets differentiating characteristics of the attribute, such as limiting the condition to emails that end with certain extensions. If a condition specifies multiple values for the operator to track, the operator iterates over the array. To learn more, read [Operators](/docs/home/flags/target-rules#operators).
 * A **value** , which identifies the attribute by a value you specify, such as `.edu` or `v1`. For segment rules, these are the segments or segment that you select.
### Rollouts
The rollout describes what variation of the flag to serve when the end user matches the targeting rule. You can set this to any of the variations of the flag, or to a [percentage rollout](/docs/home/releases/percentage-rollouts). If you want to roll out the selected variation gradually, you can add a [progressive rollout](/docs/home/releases/progressive-rollouts) or [guarded rollout](/docs/home/releases/guarded-rollouts) to the targeting rule. To learn more, read [Releasing features with LaunchDarkly](/docs/home/releases/releasing).
Here is an image of a targeting rule:
![A targeting rule that serves "Available" to all user contexts that contain an "email" attribute with a value that ends in ".edu".](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/04842281d8c56409c09b4b6d6157cb803c6864d36d403337411245373f581c72/assets/images/auto/flag-targeting-rule.auto.png)
A targeting rule that serves "Available" to all user contexts that contain an "email" attribute with a value that ends in ".edu".
By default, all the targeting rules on the flag’s **Targeting** tab are expanded, so that you can view their names and a summary of their conditions. To view only the names of the targeting rules, click the **collapse** icon from the top of the page.
##### Targeting rules limitations
There is no specific limit on the number of targeting rules you can have on a flag. As a general rule, the SDK initialization time scales with the combination of the total number of flags in the project, the size of the flag variations, and the number and complexity of targeting rules across all flags in the environment. To discuss specifics for your account, [start a Support ticket](https://support.launchdarkly.com/hc/en-us/requests/new).
### Attributes
LaunchDarkly allows you to create your own attributes. For instance, you might want to target contexts based on plan, group, role, or location.
Here is an example of a context with custom attribute values, though each SDK sends context data to LaunchDarkly in a slightly different format:
A context with custom attributes
```
1
| {
---|--- 
2
| "kind": "user",
3
| "name": "Sandy",
4
| "email": "sandy@example.com",
5
| "gymMember": true
6
| }
```
Using attributes, you could show some features to customers on your regular plan, and additional features to customers on your premium plan. Or you could roll out a new feature to 30% of end users at a particular location, rather than 30% of all end users. To learn more, read [Context attributes](/docs/home/flags/context-attributes).
In each targeting rule, you can choose an attribute specific to your chosen context kind using the “Attribute” menu.
![The "Attribute" menu, showing attributes for a user context.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/81271f00aef724e0bcf6e78139fd93e32f12b5cf4edf39e417c664217729894e/assets/images/auto/targeting-attribute-dropdown.auto.png)
The "Attribute" menu, showing attributes for a user context.
If an attribute is an object, then in your targeting you can use `/` as a delimiter to refer to specific object fields. For example, if you have an “address” attribute that includes “city,” “state,” and several other fields, then you can use `/address/city` in your targeting.
From here, you can also select whether to include or exclude all contexts of a particular context kind based on whether they are part of a segment. To learn more, read [Segments](/docs/home/flags/segments).
### Operators
LaunchDarkly supports the following operators:
Operator | Attribute type | Meaning | [JSON value](/docs/home/flags/json-targeting) 
---|---|---|--- 
is one of (=), is not one of (!=) | string, number, boolean, date | Exact match | `in` 
ends with, does not end with | string | String suffix match | `endsWith` 
starts with, does not start with | string | String prefix match | `startsWith` 
matches regex, does not match regex | string | Regular expression match | `matches` 
contains, does not contain | string | Substring match | `contains` 
greater than (>), less than (<), greater than or equal to (>=), less than or equal to (<=) | number | Numeric comparisons | `greaterThan` 
`lessThan` 
`greaterThanOrEqual` 
`lessThanOrEqual` 
before, after | date | Date comparisons. Dates must be formatted in UNIX milliseconds or a string in RFC-3339 format. To learn more, read [Representations of date/time values](/docs/sdk/concepts/flag-types#representations-of-datetime-values). | `before` 
`after` 
semantic version is one of (=), is not one of (!=), greater than (>), less than (<), greater than or equal to (>=), less than or equal to (<=) | string | Compares values as semantic versions in the format `MAJOR.MINOR.PATCH`. LaunchDarkly accepts versions without a PATCH, such as `2.0`. | `semVerEqual` 
`semVerGreaterThan` 
`semVerLessThan` 
For “greater than or equal to,” use `semVerLessThan` and set `negate` to `true` 
For “less than or equal to,” use `semVerGreaterThan` and set `negate` to `true` 
is in, is not in ([segments only](/docs/home/flags/segment-targeting#target-segments)) | segment name | Exact match. If you list more than one segment, LaunchDarkly considers the condition met if the context is in/is not in at least one of the segments. | `segmentMatch` 
Semantic versions follow the format `MAJOR.MINOR.PATCH`, such as `1.2.3`. The PATCH number is optional, so `2.0` and `2.0.1` are both valid. For some operators, LaunchDarkly stores comparisons internally as the inverse. For example, ”≥” is stored as “not <,” and ”≤” is stored as “not >.” To learn more, read [Semantic versions](/docs/sdk/concepts/flag-types#semantic-versions).
### Regular expression compatibility across SDKs
LaunchDarkly supports regular expressions for the **matches regex** and **does not match regex** operators. Because regular expression syntax varies between programming languages, regex behavior can differ depending on where your flag is evaluated.
 * **Server-side SDKs:** Regular expressions are evaluated using the regex engine of the SDK language. For example, the Java SDK uses `java.util.regex`, and the Go SDK uses Go’s `regexp` package.
 * **Client-side SDKs:** Regular expressions are evaluated by LaunchDarkly’s backend:
 * If the expression conforms to Perl syntax, LaunchDarkly evaluates it with a Rust-based regex engine.
 * If it does not conform to Perl syntax, LaunchDarkly evaluates it with a Go-based regex engine.
Neither the Rust nor Go regex engines support lookahead or lookbehind assertions. These patterns do not work in LaunchDarkly targeting rules.
To ensure consistent results across SDKs and environments, use only syntax features that are supported by all relevant regex engines. For most use cases, the safest option is to use simple expressions such as `.`, `*`, `[ ]`, `^`, and `$`. If your implementation relies on more advanced syntax, test your expressions with the specific SDKs and environments you use before deploying them.
## Types of targeting
LaunchDarkly supports the following targeting types:
 * [Targeting segments](/docs/home/flags/segment-targeting)
 * [Individual targeting](/docs/home/flags/individual-targeting)
 * [Bulk targeting](/docs/home/flags/bulk-targeting)
 * [Mobile targeting](/docs/home/flags/mobile-targeting)
 * [Custom rules](/docs/home/flags/custom-rules)
 * [Converting rules into segments](/docs/home/flags/rules-segments)
 * [Testing flag targeting](/docs/home/flags/preview-rules)
Each flag can include up to 5,000 targeting rules and 50,000 values across all rules.
You can also set flag prerequisites to make flags depend on other flags being enabled to take effect. To learn more, read [Flag prerequisites](/docs/home/flags/prereqs).
## Evaluation order
Flags evaluate flag prerequisites and rules from top to bottom.
This diagram represents rule matching behavior:
![A tree diagram showing rule matching behavior.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/b13670132da6bb5e555a5a92dd7fb0306e8e1ad9b9b6e08d32d23ec294089c6e/assets/images/__not_from_LD_app_UI/flag-targeting-diagram.png)
A tree diagram showing rule matching behavior.
At each step in the process, if the context instance matches the rule, it receives the appropriate variation. If it does not match the rule, it moves on to the next rule.
![](https://fern-image-hosting.s3.us-east-1.amazonaws.com/launchdarkly/terminal.svg)
Configure your SDK: [Evaluating flags](/docs/sdk/features/evaluating)
Here is how a context instance moves through a flag evaluation:
 1. If your app can’t connect to LaunchDarkly, the context receives the fallback value. Otherwise, it moves to the next step.
 2. If targeting is off, the context receives the default off variation. Otherwise, it moves to the next step. To learn more, read [Set default values](/docs/home/flags/new#set-default-values).
 3. If the flag has prerequisites, and the context doesn’t meet the prerequisites, it receives the default off variation. Otherwise, it moves to the next step. To learn more, read [Flag prerequisites](/docs/home/flags/prereqs).
 4. If the context is individually targeted, it receives the chosen variation in the individual targeting rule. Otherwise, it moves to the next step. To learn more, read [Individual targeting](/docs/home/flags/individual-targeting).
 5. If the context meets a flag rule, it receives the chosen variation. Otherwise, it moves to the next step. If there are multiple flag rules, the context moves through the rules from top to bottom.
 6. If the context doesn’t meet any of the previous criteria, it receives the default on variation. To learn more, read [Set default values](/docs/home/flags/new#set-default-values).
Here is an image of two targeting rules:
![Two rules, targeting a segment and an organization context.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/b5320804f54b1ff1ca16bd8dbf57474b7dd701406b33528e0265e20cc1febd7e/assets/images/auto/flag-targeting-multiple-groups.auto.png)
Two rules, targeting a segment and an organization context.
In this example, the first rule (if the segment is not in `Beta users`) is evaluated before the second rule (if the organization key is `Beta`).
### Reorder rules
You can reorder mobile targeting, segment targeting, and custom rules by clicking and dragging them into different positions. Alternatively, you can click the **overflow menu** of the flag targeting rule you want to move. Then, select **Move rule up** or **Move rule down**.
You cannot reorder prerequisites or individual targeting rules.
## Rule duplication
You can create new targeting rules by duplicating a flag’s existing targeting rule and modifying the new rule.
To duplicate an existing targeting rule:
 1. Click on the flag rule’s **three-dot** overflow menu and choose “Duplicate rule.” A new rule appears.
 * If the flag is off and the rules are hidden, click **View targeting rules**.
 2. Make at least one change to the existing rule or the new rule.
 3. Click **Review and save**.
Here is an image of the “Duplicate rule” option in the rule menu:
![A feature flag's "Duplicate rule" option.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/278a96d6d10bacaec1c5d42d3afeecbd0505f428e2c16b02bbba2f64a5c2f8ee/assets/images/auto/flag-duplicate-rule.auto.png)
A feature flag's "Duplicate rule" option.
The new rule appears below the original rule. You must make at least one change to either the existing rule or the new rule before saving your changes, to prevent two exact duplicate rules on the same flag.
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs