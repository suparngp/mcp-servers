`/`
[Product docs](/docs/home)[Guides](/docs/guides)[SDKs](/docs/sdk)[Integrations](/docs/integrations)[API docs](/docs/api)[Tutorials](/docs/tutorials)[Flagship Blog](/docs/blog)
 * Getting started
 * [Overview](/docs/home)
 * [Launch Insights](/docs/home/getting-started/launch-insights)
 * [LaunchDarkly architecture](/docs/home/getting-started/architecture)
 * [LaunchDarkly vocabulary](/docs/home/getting-started/vocabulary)
 * Feature flags and AI Configs
 * [Create flags](/docs/home/flags/create)
 * [Target with flags](/docs/home/flags/target)
 * [Flag templates](/docs/home/flags/templates)
 * [Manage flags](/docs/home/flags/manage)
 * [Code references](/docs/home/flags/code-references)
 * [AI Configs](/docs/home/ai-configs)
 * [Contexts](/docs/home/flags/contexts)
 * [Segments](/docs/home/flags/segments)
 * Releases
 * [Releasing features with LaunchDarkly](/docs/home/releases/releasing)
 * [Release policies](/docs/home/releases/release-policies)
 * [Percentage rollouts](/docs/home/releases/percentage-rollouts)
 * [Progressive rollouts](/docs/home/releases/progressive-rollouts)
 * [Guarded rollouts](/docs/home/releases/guarded-rollouts)
 * [Feature monitoring](/docs/home/releases/feature-monitoring)
 * [Release pipelines](/docs/home/releases/release-pipelines)
 * [Engineering insights](/docs/home/releases/eng-insights)
 * [Release management tools](/docs/home/releases/release-management)
 * [Applications and app versions](/docs/home/releases/apps-and-app-versions)
 * [Change history](/docs/home/releases/change-history)
 * Observability
 * [Observability](/docs/home/observability)
 * [Session replay](/docs/home/observability/session-replay)
 * [Error monitoring](/docs/home/observability/errors)
 * [Logs](/docs/home/observability/logs)
 * [Traces](/docs/home/observability/traces)
 * [LLM observability](/docs/home/observability/llm-observability)
 * [Alerts](/docs/home/observability/alerts)
 * [Dashboards](/docs/home/observability/dashboards)
 * [Search specification](/docs/home/observability/search)
 * [Observability settings](/docs/home/observability/settings)
 * [Vega](/docs/home/observability/vega)
 * Product analytics
 * [Product analytics](/docs/home/product-analytics)
 * [Setting up product analytics](/docs/home/product-analytics/setup)
 * [Using product analytics charts](/docs/home/product-analytics/chart)
 * Experimentation
 * [Experimentation](/docs/home/experimentation)
 * [Creating experiments](/docs/home/experimentation/create)
 * [Managing experiments](/docs/home/experimentation/manage)
 * [Analyzing experiments](/docs/home/experimentation/analyze)
 * [Experimentation and metric events](/docs/home/experimentation/events)
 * [Multi-armed bandits](/docs/home/multi-armed-bandits)
 * [Holdouts](/docs/home/holdouts)
 * Metrics
 * [Metrics](/docs/home/metrics)
 * [Metric groups](/docs/home/metrics/metric-groups)
 * [Autogenerated metrics](/docs/home/metrics/autogen-metrics)
 * [Metric impact](/docs/home/metrics/metric-impact)
 * [Metric events](/docs/home/metrics/metric-events)
 * Warehouse native
 * [Warehouse native Experimentation](/docs/home/warehouse-native)
 * [Warehouse native metrics](/docs/home/warehouse-native/metrics)
 * [Creating warehouse native experiments](/docs/home/warehouse-native/creating)
 * Infrastructure
 * [Connect apps and services to LaunchDarkly](/docs/home/infrastructure/apps)
 * [LaunchDarkly in China and Pakistan](/docs/home/infrastructure/china)
 * [LaunchDarkly in the European Union (EU)](/docs/home/infrastructure/eu)
 * [LaunchDarkly in federal environments](/docs/home/infrastructure/federal)
 * [Public IP list](/docs/home/infrastructure/ip-list)
 * Your account
 * [Projects](/docs/home/account/project)
 * [Views](/docs/home/account/views)
 * [Environments](/docs/home/account/environment)
 * [Tags](/docs/home/account/tags)
 * [Teams](/docs/home/account/teams)
 * [Members](/docs/home/account/members)
 * [Roles](/docs/home/account/roles)
 * [Account security](/docs/home/account/secure)
 * [Billing and usage](/docs/home/account/billing)
 * [Changelog](/docs/home/changelog)
[Sign in](/)[Sign up](https://app.launchdarkly.com/signup)
On this page
 * [Overview](#overview)
 * [Prerequisites](#prerequisites)
 * [Set up GitLab code references](#set-up-gitlab-code-references)
 * [How the script works](#how-the-script-works)
 * [Additional configuration options](#additional-configuration-options)
##### Code references are available to customers on select plans
Code references are only available to customers on select plans. To learn more, [read about our pricing](https://launchdarkly.com/pricing/). To upgrade your plan, [contact Sales](https://launchdarkly.com/contact-sales/).
## Overview
This topic explains how to set up and configure the GitLab code references to use with LaunchDarkly.
You can use the [`ld-find-code-refs`](https://github.com/launchdarkly/ld-find-code-refs/) utility with [GitLab CI](https://about.gitlab.com/solutions/continuous-integration/) to automatically populate code references in LaunchDarkly.
Follow the procedure below to create a GitLab code references configuration using LaunchDarkly’s code references executable.
## Prerequisites
To complete this procedure, you must have the following prerequisites:
 * An API access token with write permissions for the `code-reference-repository` resource, either through a base role, a LaunchDarkly-provided project role, or another role that you have created. To learn more, read [API access tokens](/docs/home/account/api) and [Code reference actions](/docs/home/account/roles/role-actions#code-reference-actions).
## Set up GitLab code references
Here’s how to set up the GitLab code references:
 1. Navigate to your GitLab project’s CI / CD settings by clicking through **Your project** , then **Settings** , then **CI/CD**.
 2. Expand **Variables**.
 3. Create a variable called `LD_ACCESS_TOKEN`. Use the same value as your LaunchDarkly access token. Click the toggle to set the variable to **Masked**.
 4. Create a variable called `LD_PROJECT_KEY`. Use your LaunchDarkly project’s key as the value. To learn how to find your project key, read [Project keys](/docs/home/account/project#project-keys). To learn more about setting variables, read [GitLab’s documentation](https://docs.gitlab.com/ee/ci/variables/#creating-a-custom-environment-variable).
![The GitLab Variables dialog with masked "LD_ACCESS_TOKEN" and "LD_PROJECT_KEY" created.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/0d28849507107ecb5bcc106b70d0efa69aab5648de6044d02d5a5853e893a404/assets/images/__third_party/gitlab-ci-env-variables.png)
The GitLab Variables dialog with masked "LD_ACCESS_TOKEN" and "LD_PROJECT_KEY" created.
 1. Open your `.gitlab-ci.yml` file. This file defines your project’s CI/CD pipeline. To learn more about getting started with GitLab code references, read [GitLab’s documentation](https://docs.gitlab.com/ee/ci/#getting-started).
 2. Copy and paste the following into `.gitlab-ci.yml`. No changes to the script are needed if your pipeline runs on Alpine Linux. If `apk` is unavailable in your environment then you’ll need to modify the first three steps to use a different package manager:
YAML
```
1
| find-launchdarkly-code-refs:
---|--- 
2
| stage: deploy
3
| image:
4
| name: launchdarkly/ld-find-code-refs:latest
5
| entrypoint: [""]
6
| script:
7
| - ld-find-code-refs
8
| --accessToken $LD_ACCESS_TOKEN
9
| --projKey $LD_PROJECT_KEY
10
| --dir $CI_PROJECT_DIR
11
| --repoName $CI_PROJECT_NAME
12
| --repoUrl $CI_PROJECT_URL
13
| --repoType gitlab
14
| --branch $CI_COMMIT_REF_NAME
15
| --updateSequenceId $CI_PIPELINE_IID
16
| --userAgent gitlab-pipeline
```
## How the script works
When executed, this script downloads and runs the `ld-find-code-refs` docker image.
This script runs the docker image with previously-set variables, as well as GitLab-specific configurations.
The `find-launchdarkly-code-refs` script runs in GitLab’s `deploy` phase. As written, `find-launchdarkly-code-refs` runs concurrent to other scripts in the `deploy` stage. We positioned the script this way so problems running `ld-find-code-refs` won’t block the deployment pipeline.
In the example `.gitlab-ci.yml` below, the `find-launchdarkly-code-refs` script runs as a part of a project’s pipeline:
YAML
```
1
| image: alpine:latest
---|--- 
2
| 
3
| build1:
4
| stage: build
5
| script:
6
| - echo "Build something"
7
| 
8
| test1:
9
| stage: test
10
| script:
11
| - echo "Test something"
12
| 
13
| deploy1:
14
| stage: deploy
15
| script:
16
| - echo "Deploy something"
17
| 
18
| find-launchdarkly-code-refs:
19
| stage: deploy
20
| image:
21
| name: launchdarkly/ld-find-code-refs:latest
22
| entrypoint: [""]
23
| script:
24
| - ld-find-code-refs
25
| --accessToken $LD_ACCESS_TOKEN
26
| --projKey $LD_PROJECT_KEY
27
| --dir $CI_PROJECT_DIR
28
| --repoName $CI_PROJECT_NAME
29
| --repoUrl $CI_PROJECT_URL
30
| --repoType gitlab
31
| --branch $CI_COMMIT_REF_NAME
32
| --updateSequenceId $CI_PIPELINE_IID
33
| --userAgent gitlab-pipeline
```
When the jobs run in the pipeline, they display like this:
![A screenshot of the jobs running.](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/50a940ffdb9bc048210cacce1d43b268eaa2664cdf8aa9922ecf3525c0bd5897/assets/images/__third_party/gitlab-ci-jobs.png)
A screenshot of the jobs running.
## Additional configuration options
There are more configuration options for `ld-find-code-refs`.
You can exclude files and directories from searches with an [`.ldignore`](https://github.com/launchdarkly/ld-find-code-refs/blob/main/docs/CONFIGURATION.md#ignoring-files-and-directories) file.
You can use the [`.launchdarkly/coderefs.yaml`](https://github.com/launchdarkly/ld-find-code-refs/blob/main/docs/CONFIGURATION.md#advanced-yaml-configuration) file for advanced configuration, such as configuring custom delimiters and aliases for your flag keys.
To learn more, read the [configuration documentation](https://github.com/launchdarkly/ld-find-code-refs/blob/main/docs/CONFIGURATION.md).
[![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)![Logo](https://files.buildwithfern.com/https://launchdarkly.docs.buildwithfern.com/docs/a8964c2c365fb94c416a0e31ff873d21ce0c3cbf40142e7e66cce5ae08a093af/assets/logo-dark.svg)](/docs/home)
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs
LaunchDarkly docs