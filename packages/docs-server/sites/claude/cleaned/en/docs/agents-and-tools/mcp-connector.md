Agent Skills are now available! [Learn more about extending Claude's capabilities with Agent Skills](/en/docs/agents-and-tools/agent-skills/overview).
[Claude Docs home page![light logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/light.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=c877c45432515ee69194cb19e9f983a2)![dark logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/dark.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=f5bb877be0cb3cba86cf6d7c88185216)](/)
![US](https://d3gk2c5xim1je2.cloudfront.net/flags/US.svg)
English
Search...
⌘K
Search...
Navigation
Model Context Protocol (MCP)
MCP connector
[Welcome](/en/home)[Claude Developer Platform](/en/docs/intro)[Claude Code](/en/docs/claude-code/overview)[Model Context Protocol (MCP)](/en/docs/mcp)[API Reference](/en/api/messages)[Resources](/en/resources/overview)[Release Notes](/en/release-notes/overview)
* [](/en/docs/intro)
* [](/en/api/overview)
##### First steps
 * [Intro to Claude](/en/docs/intro)
 * [Quick start](/en/docs/get-started)
##### Models & pricing
 * [Models overview](/en/docs/about-claude/models/overview)
 * [Choosing a model](/en/docs/about-claude/models/choosing-a-model)
 * [What's new in Claude 4.5](/en/docs/about-claude/models/whats-new-claude-4-5)
 * [Migrating to Claude 4.5](/en/docs/about-claude/models/migrating-to-claude-4)
 * [Model deprecations](/en/docs/about-claude/model-deprecations)
 * [Pricing](/en/docs/about-claude/pricing)
##### Learn about Claude
 * [Features overview](/en/docs/build-with-claude/overview)
 * [Building with Claude](/en/docs/overview)
 * [Context windows](/en/docs/build-with-claude/context-windows)
 * [Glossary](/en/docs/about-claude/glossary)
##### Capabilities
 * [Prompt caching](/en/docs/build-with-claude/prompt-caching)
 * [Context editing](/en/docs/build-with-claude/context-editing)
 * [Extended thinking](/en/docs/build-with-claude/extended-thinking)
 * [Streaming Messages](/en/docs/build-with-claude/streaming)
 * [Batch processing](/en/docs/build-with-claude/batch-processing)
 * [Citations](/en/docs/build-with-claude/citations)
 * [Multilingual support](/en/docs/build-with-claude/multilingual-support)
 * [Token counting](/en/docs/build-with-claude/token-counting)
 * [Embeddings](/en/docs/build-with-claude/embeddings)
 * [Vision](/en/docs/build-with-claude/vision)
 * [PDF support](/en/docs/build-with-claude/pdf-support)
 * [Files API](/en/docs/build-with-claude/files)
 * [Search results](/en/docs/build-with-claude/search-results)
 * [Google Sheets add-on](/en/docs/agents-and-tools/claude-for-sheets)
##### Tools
 * [Overview](/en/docs/agents-and-tools/tool-use/overview)
 * [How to implement tool use](/en/docs/agents-and-tools/tool-use/implement-tool-use)
 * [Token-efficient tool use](/en/docs/agents-and-tools/tool-use/token-efficient-tool-use)
 * [Fine-grained tool streaming](/en/docs/agents-and-tools/tool-use/fine-grained-tool-streaming)
 * [Bash tool](/en/docs/agents-and-tools/tool-use/bash-tool)
 * [Code execution tool](/en/docs/agents-and-tools/tool-use/code-execution-tool)
 * [Computer use tool](/en/docs/agents-and-tools/tool-use/computer-use-tool)
 * [Text editor tool](/en/docs/agents-and-tools/tool-use/text-editor-tool)
 * [Web fetch tool](/en/docs/agents-and-tools/tool-use/web-fetch-tool)
 * [Web search tool](/en/docs/agents-and-tools/tool-use/web-search-tool)
 * [Memory tool](/en/docs/agents-and-tools/tool-use/memory-tool)
##### Agent Skills
 * [Overview](/en/docs/agents-and-tools/agent-skills/overview)
 * [Quickstart](/en/docs/agents-and-tools/agent-skills/quickstart)
 * [Best practices](/en/docs/agents-and-tools/agent-skills/best-practices)
##### Model Context Protocol (MCP)
 * [MCP connector](/en/docs/agents-and-tools/mcp-connector)
 * [Remote MCP servers](/en/docs/agents-and-tools/remote-mcp-servers)
##### Use cases
 * [Overview](/en/docs/about-claude/use-case-guides/overview)
 * [Ticket routing](/en/docs/about-claude/use-case-guides/ticket-routing)
 * [Customer support agent](/en/docs/about-claude/use-case-guides/customer-support-chat)
 * [Content moderation](/en/docs/about-claude/use-case-guides/content-moderation)
 * [Legal summarization](/en/docs/about-claude/use-case-guides/legal-summarization)
##### Prompt engineering
 * [Overview](/en/docs/build-with-claude/prompt-engineering/overview)
 * [Claude 4 best practices](/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices)
 * [Prompt generator](/en/docs/build-with-claude/prompt-engineering/prompt-generator)
 * [Use prompt templates](/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables)
 * [Prompt improver](/en/docs/build-with-claude/prompt-engineering/prompt-improver)
 * [Be clear and direct](/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct)
 * [Use examples (multishot prompting)](/en/docs/build-with-claude/prompt-engineering/multishot-prompting)
 * [Let Claude think (CoT)](/en/docs/build-with-claude/prompt-engineering/chain-of-thought)
 * [Use XML tags](/en/docs/build-with-claude/prompt-engineering/use-xml-tags)
 * [Give Claude a role (system prompts)](/en/docs/build-with-claude/prompt-engineering/system-prompts)
 * [Prefill Claude's response](/en/docs/build-with-claude/prompt-engineering/prefill-claudes-response)
 * [Chain complex prompts](/en/docs/build-with-claude/prompt-engineering/chain-prompts)
 * [Long context tips](/en/docs/build-with-claude/prompt-engineering/long-context-tips)
 * [Extended thinking tips](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips)
##### Test & evaluate
 * [Define success criteria](/en/docs/test-and-evaluate/define-success)
 * [Develop test cases](/en/docs/test-and-evaluate/develop-tests)
 * [Using the Evaluation Tool](/en/docs/test-and-evaluate/eval-tool)
 * [Reducing latency](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-latency)
##### Strengthen guardrails
 * [Reduce hallucinations](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-hallucinations)
 * [Increase output consistency](/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency)
 * [Mitigate jailbreaks](/en/docs/test-and-evaluate/strengthen-guardrails/mitigate-jailbreaks)
 * [Streaming refusals](/en/docs/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals)
 * [Reduce prompt leak](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-prompt-leak)
 * [Keep Claude in character](/en/docs/test-and-evaluate/strengthen-guardrails/keep-claude-in-character)
On this page
 * [Key features](#key-features)
 * [Limitations](#limitations)
 * [Using the MCP connector in the Messages API](#using-the-mcp-connector-in-the-messages-api)
 * [MCP server configuration](#mcp-server-configuration)
 * [Field descriptions](#field-descriptions)
 * [Response content types](#response-content-types)
 * [MCP Tool Use Block](#mcp-tool-use-block)
 * [MCP Tool Result Block](#mcp-tool-result-block)
 * [Multiple MCP servers](#multiple-mcp-servers)
 * [Authentication](#authentication)
 * [Obtaining an access token for testing](#obtaining-an-access-token-for-testing)
 * [Using the access token](#using-the-access-token)
Claude’s Model Context Protocol (MCP) connector feature enables you to connect to remote MCP servers directly from the Messages API without a separate MCP client.
This feature requires the beta header: `"anthropic-beta": "mcp-client-2025-04-04"`
## 
[​](#key-features)
Key features
 * **Direct API integration** : Connect to MCP servers without implementing an MCP client
 * **Tool calling support** : Access MCP tools through the Messages API
 * **OAuth authentication** : Support for OAuth Bearer tokens for authenticated servers
 * **Multiple servers** : Connect to multiple MCP servers in a single request
## 
[​](#limitations)
Limitations
 * Of the feature set of the [MCP specification](https://modelcontextprotocol.io/introduction#explore-mcp), only [tool calls](https://modelcontextprotocol.io/docs/concepts/tools) are currently supported.
 * The server must be publicly exposed through HTTP (supports both Streamable HTTP and SSE transports). Local STDIO servers cannot be connected directly.
 * The MCP connector is currently not supported on Amazon Bedrock and Google Vertex.
## 
[​](#using-the-mcp-connector-in-the-messages-api)
Using the MCP connector in the Messages API
To connect to a remote MCP server, include the `mcp_servers` parameter in your Messages API request:
cURL
TypeScript
Python
Copy
```
curl https://api.anthropic.com/v1/messages \
 -H "Content-Type: application/json" \
 -H "X-API-Key: $ANTHROPIC_API_KEY" \
 -H "anthropic-version: 2023-06-01" \
 -H "anthropic-beta: mcp-client-2025-04-04" \
 -d '{
 "model": "claude-sonnet-4-5",
 "max_tokens": 1000,
 "messages": [{"role": "user", "content": "What tools do you have available?"}],
 "mcp_servers": [
 {
 "type": "url",
 "url": "https://example-server.modelcontextprotocol.io/sse",
 "name": "example-mcp",
 "authorization_token": "YOUR_TOKEN"
 }
 ]
 }'
```
## 
[​](#mcp-server-configuration)
MCP server configuration
Each MCP server in the `mcp_servers` array supports the following configuration:
Copy
```
{
 "type": "url",
 "url": "https://example-server.modelcontextprotocol.io/sse",
 "name": "example-mcp",
 "tool_configuration": {
 "enabled": true,
 "allowed_tools": ["example_tool_1", "example_tool_2"]
 },
 "authorization_token": "YOUR_TOKEN"
}
```
### 
[​](#field-descriptions)
Field descriptions
Property | Type | Required | Description 
---|---|---|--- 
`type` | string | Yes | Currently only “url” is supported 
`url` | string | Yes | The URL of the MCP server. Must start with https:// 
`name` | string | Yes | A unique identifier for this MCP server. It will be used in `mcp_tool_call` blocks to identify the server and to disambiguate tools to the model. 
`tool_configuration` | object | No | Configure tool usage 
`tool_configuration.enabled` | boolean | No | Whether to enable tools from this server (default: true) 
`tool_configuration.allowed_tools` | array | No | List to restrict the tools to allow (by default, all tools are allowed) 
`authorization_token` | string | No | OAuth authorization token if required by the MCP server. See [MCP specification](https://modelcontextprotocol.io/specification/2025-03-26/basic/authorization). 
## 
[​](#response-content-types)
Response content types
When Claude uses MCP tools, the response will include two new content block types:
### 
[​](#mcp-tool-use-block)
MCP Tool Use Block
Copy
```
{
 "type": "mcp_tool_use",
 "id": "mcptoolu_014Q35RayjACSWkSj4X2yov1",
 "name": "echo",
 "server_name": "example-mcp",
 "input": { "param1": "value1", "param2": "value2" }
}
```
### 
[​](#mcp-tool-result-block)
MCP Tool Result Block
Copy
```
{
 "type": "mcp_tool_result",
 "tool_use_id": "mcptoolu_014Q35RayjACSWkSj4X2yov1",
 "is_error": false,
 "content": [
 {
 "type": "text",
 "text": "Hello"
 }
 ]
}
```
## 
[​](#multiple-mcp-servers)
Multiple MCP servers
You can connect to multiple MCP servers by including multiple objects in the `mcp_servers` array:
Copy
```
{
 "model": "claude-sonnet-4-5",
 "max_tokens": 1000,
 "messages": [
 {
 "role": "user",
 "content": "Use tools from both mcp-server-1 and mcp-server-2 to complete this task"
 }
 ],
 "mcp_servers": [
 {
 "type": "url",
 "url": "https://mcp.example1.com/sse",
 "name": "mcp-server-1",
 "authorization_token": "TOKEN1"
 },
 {
 "type": "url",
 "url": "https://mcp.example2.com/sse",
 "name": "mcp-server-2",
 "authorization_token": "TOKEN2"
 }
 ]
}
```
## 
[​](#authentication)
Authentication
For MCP servers that require OAuth authentication, you’ll need to obtain an access token. The MCP connector beta supports passing an `authorization_token` parameter in the MCP server definition. API consumers are expected to handle the OAuth flow and obtain the access token prior to making the API call, as well as refreshing the token as needed.
### 
[​](#obtaining-an-access-token-for-testing)
Obtaining an access token for testing
The MCP inspector can guide you through the process of obtaining an access token for testing purposes.
 1. Run the inspector with the following command. You need Node.js installed on your machine.
Copy
```
npx @modelcontextprotocol/inspector
```
 2. In the sidebar on the left, for “Transport type”, select either “SSE” or “Streamable HTTP”.
 3. Enter the URL of the MCP server.
 4. In the right area, click on the “Open Auth Settings” button after “Need to configure authentication?”.
 5. Click “Quick OAuth Flow” and authorize on the OAuth screen.
 6. Follow the steps in the “OAuth Flow Progress” section of the inspector and click “Continue” until you reach “Authentication complete”.
 7. Copy the `access_token` value.
 8. Paste it into the `authorization_token` field in your MCP server configuration.
### 
[​](#using-the-access-token)
Using the access token
Once you’ve obtained an access token using either OAuth flow above, you can use it in your MCP server configuration:
Copy
```
{
 "mcp_servers": [
 {
 "type": "url",
 "url": "https://example-server.modelcontextprotocol.io/sse",
 "name": "authenticated-server",
 "authorization_token": "YOUR_ACCESS_TOKEN_HERE"
 }
 ]
}
```
For detailed explanations of the OAuth flow, refer to the [Authorization section](https://modelcontextprotocol.io/docs/concepts/authentication) in the MCP specification.
Was this page helpful?
YesNo
[Best practices](/en/docs/agents-and-tools/agent-skills/best-practices)[Remote MCP servers](/en/docs/agents-and-tools/remote-mcp-servers)
Assistant
Responses are generated using AI and may contain mistakes.