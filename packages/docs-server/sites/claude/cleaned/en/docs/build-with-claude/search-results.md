Agent Skills are now available! [Learn more about extending Claude's capabilities with Agent Skills](/en/docs/agents-and-tools/agent-skills/overview).
[Claude Docs home page![light logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/light.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=c877c45432515ee69194cb19e9f983a2)![dark logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/dark.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=f5bb877be0cb3cba86cf6d7c88185216)](/)
![US](https://d3gk2c5xim1je2.cloudfront.net/flags/US.svg)
English
Search...
⌘K
Search...
Navigation
Capabilities
Search results
[Welcome](/en/home)[Claude Developer Platform](/en/docs/intro)[Claude Code](/en/docs/claude-code/overview)[Model Context Protocol (MCP)](/en/docs/mcp)[API Reference](/en/api/messages)[Resources](/en/resources/overview)[Release Notes](/en/release-notes/overview)
* [](/en/docs/intro)
* [](/en/api/overview)
##### First steps
 * [Intro to Claude](/en/docs/intro)
 * [Quick start](/en/docs/get-started)
##### Models & pricing
 * [Models overview](/en/docs/about-claude/models/overview)
 * [Choosing a model](/en/docs/about-claude/models/choosing-a-model)
 * [What's new in Claude 4.5](/en/docs/about-claude/models/whats-new-claude-4-5)
 * [Migrating to Claude 4.5](/en/docs/about-claude/models/migrating-to-claude-4)
 * [Model deprecations](/en/docs/about-claude/model-deprecations)
 * [Pricing](/en/docs/about-claude/pricing)
##### Learn about Claude
 * [Features overview](/en/docs/build-with-claude/overview)
 * [Building with Claude](/en/docs/overview)
 * [Context windows](/en/docs/build-with-claude/context-windows)
 * [Glossary](/en/docs/about-claude/glossary)
##### Capabilities
 * [Prompt caching](/en/docs/build-with-claude/prompt-caching)
 * [Context editing](/en/docs/build-with-claude/context-editing)
 * [Extended thinking](/en/docs/build-with-claude/extended-thinking)
 * [Streaming Messages](/en/docs/build-with-claude/streaming)
 * [Batch processing](/en/docs/build-with-claude/batch-processing)
 * [Citations](/en/docs/build-with-claude/citations)
 * [Multilingual support](/en/docs/build-with-claude/multilingual-support)
 * [Token counting](/en/docs/build-with-claude/token-counting)
 * [Embeddings](/en/docs/build-with-claude/embeddings)
 * [Vision](/en/docs/build-with-claude/vision)
 * [PDF support](/en/docs/build-with-claude/pdf-support)
 * [Files API](/en/docs/build-with-claude/files)
 * [Search results](/en/docs/build-with-claude/search-results)
 * [Google Sheets add-on](/en/docs/agents-and-tools/claude-for-sheets)
##### Tools
 * [Overview](/en/docs/agents-and-tools/tool-use/overview)
 * [How to implement tool use](/en/docs/agents-and-tools/tool-use/implement-tool-use)
 * [Token-efficient tool use](/en/docs/agents-and-tools/tool-use/token-efficient-tool-use)
 * [Fine-grained tool streaming](/en/docs/agents-and-tools/tool-use/fine-grained-tool-streaming)
 * [Bash tool](/en/docs/agents-and-tools/tool-use/bash-tool)
 * [Code execution tool](/en/docs/agents-and-tools/tool-use/code-execution-tool)
 * [Computer use tool](/en/docs/agents-and-tools/tool-use/computer-use-tool)
 * [Text editor tool](/en/docs/agents-and-tools/tool-use/text-editor-tool)
 * [Web fetch tool](/en/docs/agents-and-tools/tool-use/web-fetch-tool)
 * [Web search tool](/en/docs/agents-and-tools/tool-use/web-search-tool)
 * [Memory tool](/en/docs/agents-and-tools/tool-use/memory-tool)
##### Agent Skills
 * [Overview](/en/docs/agents-and-tools/agent-skills/overview)
 * [Quickstart](/en/docs/agents-and-tools/agent-skills/quickstart)
 * [Best practices](/en/docs/agents-and-tools/agent-skills/best-practices)
##### Model Context Protocol (MCP)
 * [MCP connector](/en/docs/agents-and-tools/mcp-connector)
 * [Remote MCP servers](/en/docs/agents-and-tools/remote-mcp-servers)
##### Use cases
 * [Overview](/en/docs/about-claude/use-case-guides/overview)
 * [Ticket routing](/en/docs/about-claude/use-case-guides/ticket-routing)
 * [Customer support agent](/en/docs/about-claude/use-case-guides/customer-support-chat)
 * [Content moderation](/en/docs/about-claude/use-case-guides/content-moderation)
 * [Legal summarization](/en/docs/about-claude/use-case-guides/legal-summarization)
##### Prompt engineering
 * [Overview](/en/docs/build-with-claude/prompt-engineering/overview)
 * [Claude 4 best practices](/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices)
 * [Prompt generator](/en/docs/build-with-claude/prompt-engineering/prompt-generator)
 * [Use prompt templates](/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables)
 * [Prompt improver](/en/docs/build-with-claude/prompt-engineering/prompt-improver)
 * [Be clear and direct](/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct)
 * [Use examples (multishot prompting)](/en/docs/build-with-claude/prompt-engineering/multishot-prompting)
 * [Let Claude think (CoT)](/en/docs/build-with-claude/prompt-engineering/chain-of-thought)
 * [Use XML tags](/en/docs/build-with-claude/prompt-engineering/use-xml-tags)
 * [Give Claude a role (system prompts)](/en/docs/build-with-claude/prompt-engineering/system-prompts)
 * [Prefill Claude's response](/en/docs/build-with-claude/prompt-engineering/prefill-claudes-response)
 * [Chain complex prompts](/en/docs/build-with-claude/prompt-engineering/chain-prompts)
 * [Long context tips](/en/docs/build-with-claude/prompt-engineering/long-context-tips)
 * [Extended thinking tips](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips)
##### Test & evaluate
 * [Define success criteria](/en/docs/test-and-evaluate/define-success)
 * [Develop test cases](/en/docs/test-and-evaluate/develop-tests)
 * [Using the Evaluation Tool](/en/docs/test-and-evaluate/eval-tool)
 * [Reducing latency](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-latency)
##### Strengthen guardrails
 * [Reduce hallucinations](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-hallucinations)
 * [Increase output consistency](/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency)
 * [Mitigate jailbreaks](/en/docs/test-and-evaluate/strengthen-guardrails/mitigate-jailbreaks)
 * [Streaming refusals](/en/docs/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals)
 * [Reduce prompt leak](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-prompt-leak)
 * [Keep Claude in character](/en/docs/test-and-evaluate/strengthen-guardrails/keep-claude-in-character)
On this page
 * [Key benefits](#key-benefits)
 * [How it works](#how-it-works)
 * [Search result schema](#search-result-schema)
 * [Required fields](#required-fields)
 * [Optional fields](#optional-fields)
 * [Method 1: Search results from tool calls](#method-1%3A-search-results-from-tool-calls)
 * [Example: Knowledge base tool](#example%3A-knowledge-base-tool)
 * [Method 2: Search results as top-level content](#method-2%3A-search-results-as-top-level-content)
 * [Example: Direct search results](#example%3A-direct-search-results)
 * [Claude’s response with citations](#claude%E2%80%99s-response-with-citations)
 * [Citation fields](#citation-fields)
 * [Multiple content blocks](#multiple-content-blocks)
 * [Advanced usage](#advanced-usage)
 * [Combining both methods](#combining-both-methods)
 * [Combining with other content types](#combining-with-other-content-types)
 * [Cache control](#cache-control)
 * [Citation control](#citation-control)
 * [Best practices](#best-practices)
 * [For tool-based search (Method 1)](#for-tool-based-search-method-1)
 * [For top-level search (Method 2)](#for-top-level-search-method-2)
 * [General best practices](#general-best-practices)
 * [Limitations](#limitations)
Search result content blocks enable natural citations with proper source attribution, bringing web search-quality citations to your custom applications. This feature is particularly powerful for RAG (Retrieval-Augmented Generation) applications where you need Claude to cite sources accurately. The search results feature is available on the following models:
 * Claude 3.5 Haiku (`claude-3-5-haiku-20241022`)
 * Claude Sonnet 3.5 (`claude-3-5-sonnet-20241022`)
 * Claude 3.7 Sonnet (`claude-3-7-sonnet-20250219`)
 * Claude Opus 4.1 (`claude-opus-4-1-20250805`)
 * Claude Opus 4 (`claude-opus-4-20250514`)
 * Claude Sonnet 4.5 (`claude-sonnet-4-5-20250929`)
## 
[​](#key-benefits)
Key benefits
 * **Natural citations** - Achieve the same citation quality as web search for any content
 * **Flexible integration** - Use in tool returns for dynamic RAG or as top-level content for pre-fetched data
 * **Proper source attribution** - Each result includes source and title information for clear attribution
 * **No document workarounds needed** - Eliminates the need for document-based workarounds
 * **Consistent citation format** - Matches the citation quality and format of Claude’s web search functionality
## 
[​](#how-it-works)
How it works
Search results can be provided in two ways:
 1. **From tool calls** - Your custom tools return search results, enabling dynamic RAG applications
 2. **As top-level content** - You provide search results directly in user messages for pre-fetched or cached content
In both cases, Claude can automatically cite information from the search results with proper source attribution.
### 
[​](#search-result-schema)
Search result schema
Search results use the following structure:
Copy
```
{
 "type": "search_result",
 "source": "https://example.com/article", // Required: Source URL or identifier
 "title": "Article Title", // Required: Title of the result
 "content": [ // Required: Array of text blocks
 {
 "type": "text",
 "text": "The actual content of the search result..."
 }
 ],
 "citations": { // Optional: Citation configuration
 "enabled": true // Enable/disable citations for this result
 }
}
```
### 
[​](#required-fields)
Required fields
Field | Type | Description 
---|---|--- 
`type` | string | Must be `"search_result"` 
`source` | string | The source URL or identifier for the content 
`title` | string | A descriptive title for the search result 
`content` | array | An array of text blocks containing the actual content 
### 
[​](#optional-fields)
Optional fields
Field | Type | Description 
---|---|--- 
`citations` | object | Citation configuration with `enabled` boolean field 
`cache_control` | object | Cache control settings (e.g., `{"type": "ephemeral"}`) 
Each item in the `content` array must be a text block with:
 * `type`: Must be `"text"`
 * `text`: The actual text content (non-empty string)
## 
[​](#method-1%3A-search-results-from-tool-calls)
Method 1: Search results from tool calls
The most powerful use case is returning search results from your custom tools. This enables dynamic RAG applications where tools fetch and return relevant content with automatic citations.
### 
[​](#example%3A-knowledge-base-tool)
Example: Knowledge base tool
Python
TypeScript
Copy
```
from anthropic import Anthropic
from anthropic.types import (
 MessageParam,
 TextBlockParam,
 SearchResultBlockParam,
 ToolResultBlockParam
)
client = Anthropic()
# Define a knowledge base search tool
knowledge_base_tool = {
 "name": "search_knowledge_base",
 "description": "Search the company knowledge base for information",
 "input_schema": {
 "type": "object",
 "properties": {
 "query": {
 "type": "string",
 "description": "The search query"
 }
 },
 "required": ["query"]
 }
}
# Function to handle the tool call
def search_knowledge_base(query):
 # Your search logic here
 # Returns search results in the correct format
 return [
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/product-guide",
 title="Product Configuration Guide",
 content=[
 TextBlockParam(
 type="text",
 text="To configure the product, navigate to Settings > Configuration. The default timeout is 30 seconds, but can be adjusted between 10-120 seconds based on your needs."
 )
 ],
 citations={"enabled": True}
 ),
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/troubleshooting",
 title="Troubleshooting Guide",
 content=[
 TextBlockParam(
 type="text",
 text="If you encounter timeout errors, first check the configuration settings. Common causes include network latency and incorrect timeout values."
 )
 ],
 citations={"enabled": True}
 )
 ]
# Create a message with the tool
response = client.messages.create(
 model="claude-sonnet-4-5", # Works with all supported models
 max_tokens=1024,
 tools=[knowledge_base_tool],
 messages=[
 MessageParam(
 role="user",
 content="How do I configure the timeout settings?"
 )
 ]
)
# When Claude calls the tool, provide the search results
if response.content[0].type == "tool_use":
 tool_result = search_knowledge_base(response.content[0].input["query"])
 # Send the tool result back
 final_response = client.messages.create(
 model="claude-sonnet-4-5", # Works with all supported models
 max_tokens=1024,
 messages=[
 MessageParam(role="user", content="How do I configure the timeout settings?"),
 MessageParam(role="assistant", content=response.content),
 MessageParam(
 role="user",
 content=[
 ToolResultBlockParam(
 type="tool_result",
 tool_use_id=response.content[0].id,
 content=tool_result # Search results go here
 )
 ]
 )
 ]
 )
```
## 
[​](#method-2%3A-search-results-as-top-level-content)
Method 2: Search results as top-level content
You can also provide search results directly in user messages. This is useful for:
 * Pre-fetched content from your search infrastructure
 * Cached search results from previous queries
 * Content from external search services
 * Testing and development
### 
[​](#example%3A-direct-search-results)
Example: Direct search results
Python
TypeScript
Shell
Copy
```
from anthropic import Anthropic
from anthropic.types import (
 MessageParam,
 TextBlockParam,
 SearchResultBlockParam
)
client = Anthropic()
# Provide search results directly in the user message
response = client.messages.create(
 model="claude-sonnet-4-5",
 max_tokens=1024,
 messages=[
 MessageParam(
 role="user",
 content=[
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/api-reference",
 title="API Reference - Authentication",
 content=[
 TextBlockParam(
 type="text",
 text="All API requests must include an API key in the Authorization header. Keys can be generated from the dashboard. Rate limits: 1000 requests per hour for standard tier, 10000 for premium."
 )
 ],
 citations={"enabled": True}
 ),
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/quickstart",
 title="Getting Started Guide",
 content=[
 TextBlockParam(
 type="text",
 text="To get started: 1) Sign up for an account, 2) Generate an API key from the dashboard, 3) Install our SDK using pip install company-sdk, 4) Initialize the client with your API key."
 )
 ],
 citations={"enabled": True}
 ),
 TextBlockParam(
 type="text",
 text="Based on these search results, how do I authenticate API requests and what are the rate limits?"
 )
 ]
 )
 ]
)
print(response.model_dump_json(indent=2))
```
## 
[​](#claude%E2%80%99s-response-with-citations)
Claude’s response with citations
Regardless of how search results are provided, Claude automatically includes citations when using information from them:
Copy
```
{
 "role": "assistant",
 "content": [
 {
 "type": "text",
 "text": "To authenticate API requests, you need to include an API key in the Authorization header",
 "citations": [
 {
 "type": "search_result_location",
 "source": "https://docs.company.com/api-reference",
 "title": "API Reference - Authentication",
 "cited_text": "All API requests must include an API key in the Authorization header",
 "search_result_index": 0,
 "start_block_index": 0,
 "end_block_index": 0
 }
 ]
 },
 {
 "type": "text",
 "text": ". You can generate API keys from your dashboard",
 "citations": [
 {
 "type": "search_result_location",
 "source": "https://docs.company.com/api-reference",
 "title": "API Reference - Authentication",
 "cited_text": "Keys can be generated from the dashboard",
 "search_result_index": 0,
 "start_block_index": 0,
 "end_block_index": 0
 }
 ]
 },
 {
 "type": "text",
 "text": ". The rate limits are 1,000 requests per hour for the standard tier and 10,000 requests per hour for the premium tier.",
 "citations": [
 {
 "type": "search_result_location",
 "source": "https://docs.company.com/api-reference",
 "title": "API Reference - Authentication",
 "cited_text": "Rate limits: 1000 requests per hour for standard tier, 10000 for premium",
 "search_result_index": 0,
 "start_block_index": 0,
 "end_block_index": 0
 }
 ]
 }
 ]
}
```
### 
[​](#citation-fields)
Citation fields
Each citation includes: Field | Type | Description 
---|---|--- 
`type` | string | Always `"search_result_location"` for search result citations 
`source` | string | The source from the original search result 
`title` | string or null | The title from the original search result 
`cited_text` | string | The exact text being cited 
`search_result_index` | integer | Index of the search result (0-based) 
`start_block_index` | integer | Starting position in the content array 
`end_block_index` | integer | Ending position in the content array 
Note: The `search_result_index` refers to the index of the search result content block (0-based), regardless of how the search results were provided (tool call or top-level content).
## 
[​](#multiple-content-blocks)
Multiple content blocks
Search results can contain multiple text blocks in the `content` array:
Copy
```
{
 "type": "search_result",
 "source": "https://docs.company.com/api-guide",
 "title": "API Documentation",
 "content": [
 {
 "type": "text",
 "text": "Authentication: All API requests require an API key."
 },
 {
 "type": "text",
 "text": "Rate Limits: The API allows 1000 requests per hour per key."
 },
 {
 "type": "text",
 "text": "Error Handling: The API returns standard HTTP status codes."
 }
 ]
}
```
Claude can cite specific blocks using the `start_block_index` and `end_block_index` fields.
## 
[​](#advanced-usage)
Advanced usage
### 
[​](#combining-both-methods)
Combining both methods
You can use both tool-based and top-level search results in the same conversation:
Copy
```
# First message with top-level search results
messages = [
 MessageParam(
 role="user",
 content=[
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/overview",
 title="Product Overview",
 content=[
 TextBlockParam(type="text", text="Our product helps teams collaborate...")
 ],
 citations={"enabled": True}
 ),
 TextBlockParam(
 type="text",
 text="Tell me about this product and search for pricing information"
 )
 ]
 )
]
# Claude might respond and call a tool to search for pricing
# Then you provide tool results with more search results
```
### 
[​](#combining-with-other-content-types)
Combining with other content types
Both methods support mixing search results with other content:
Copy
```
# In tool results
tool_result = [
 SearchResultBlockParam(
 type="search_result",
 source="https://docs.company.com/guide",
 title="User Guide",
 content=[TextBlockParam(type="text", text="Configuration details...")],
 citations={"enabled": True}
 ),
 TextBlockParam(
 type="text",
 text="Additional context: This applies to version 2.0 and later."
 )
]
# In top-level content
user_content = [
 SearchResultBlockParam(
 type="search_result",
 source="https://research.com/paper",
 title="Research Paper",
 content=[TextBlockParam(type="text", text="Key findings...")],
 citations={"enabled": True}
 ),
 {
 "type": "image",
 "source": {"type": "url", "url": "https://example.com/chart.png"}
 },
 TextBlockParam(
 type="text",
 text="How does the chart relate to the research findings?"
 )
]
```
### 
[​](#cache-control)
Cache control
Add cache control for better performance:
Copy
```
{
 "type": "search_result",
 "source": "https://docs.company.com/guide",
 "title": "User Guide",
 "content": [{"type": "text", "text": "..."}],
 "cache_control": {
 "type": "ephemeral"
 }
}
```
### 
[​](#citation-control)
Citation control
By default, citations are disabled for search results. You can enable citations by explicitly setting the `citations` configuration:
Copy
```
{
 "type": "search_result",
 "source": "https://docs.company.com/guide",
 "title": "User Guide",
 "content": [{"type": "text", "text": "Important documentation..."}],
 "citations": {
 "enabled": true // Enable citations for this result
 }
}
```
When `citations.enabled` is set to `true`, Claude will include citation references when using information from the search result. This enables:
 * Natural citations for your custom RAG applications
 * Source attribution when interfacing with proprietary knowledge bases
 * Web search-quality citations for any custom tool that returns search results
If the `citations` field is omitted, citations are disabled by default.
Citations are all-or-nothing: either all search results in a request must have citations enabled, or all must have them disabled. Mixing search results with different citation settings will result in an error. If you need to disable citations for some sources, you must disable them for all search results in that request.
## 
[​](#best-practices)
Best practices
### 
[​](#for-tool-based-search-method-1)
For tool-based search (Method 1)
 * **Dynamic content** : Use for real-time searches and dynamic RAG applications
 * **Error handling** : Return appropriate messages when searches fail
 * **Result limits** : Return only the most relevant results to avoid context overflow
### 
[​](#for-top-level-search-method-2)
For top-level search (Method 2)
 * **Pre-fetched content** : Use when you already have search results
 * **Batch processing** : Ideal for processing multiple search results at once
 * **Testing** : Great for testing citation behavior with known content
### 
[​](#general-best-practices)
General best practices
 1. **Structure results effectively**
 * Use clear, permanent source URLs
 * Provide descriptive titles
 * Break long content into logical text blocks
 2. **Maintain consistency**
 * Use consistent source formats across your application
 * Ensure titles accurately reflect content
 * Keep formatting consistent
 3. **Handle errors gracefully**
Copy
```
def search_with_fallback(query):
 try:
 results = perform_search(query)
 if not results:
 return {"type": "text", "text": "No results found."}
 return format_as_search_results(results)
 except Exception as e:
 return {"type": "text", "text": f"Search error: {str(e)}"}
```
## 
[​](#limitations)
Limitations
 * Search result content blocks are available on Claude API and Google Cloud’s Vertex AI
 * Only text content is supported within search results (no images or other media)
 * The `content` array must contain at least one text block
Was this page helpful?
YesNo
[Files API](/en/docs/build-with-claude/files)[Google Sheets add-on](/en/docs/agents-and-tools/claude-for-sheets)
Assistant
Responses are generated using AI and may contain mistakes.