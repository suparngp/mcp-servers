Agent Skills are now available! [Learn more about extending Claude's capabilities with Agent Skills](/en/docs/agents-and-tools/agent-skills/overview).
[Claude Docs home page![light logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/light.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=c877c45432515ee69194cb19e9f983a2)![dark logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/dark.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=f5bb877be0cb3cba86cf6d7c88185216)](/)
![US](https://d3gk2c5xim1je2.cloudfront.net/flags/US.svg)
English
Search...
⌘K
Search...
Navigation
Capabilities
Token counting
[Welcome](/en/home)[Claude Developer Platform](/en/docs/intro)[Claude Code](/en/docs/claude-code/overview)[Model Context Protocol (MCP)](/en/docs/mcp)[API Reference](/en/api/messages)[Resources](/en/resources/overview)[Release Notes](/en/release-notes/overview)
* [](/en/docs/intro)
* [](/en/api/overview)
##### First steps
 * [Intro to Claude](/en/docs/intro)
 * [Quick start](/en/docs/get-started)
##### Models & pricing
 * [Models overview](/en/docs/about-claude/models/overview)
 * [Choosing a model](/en/docs/about-claude/models/choosing-a-model)
 * [What's new in Claude 4.5](/en/docs/about-claude/models/whats-new-claude-4-5)
 * [Migrating to Claude 4.5](/en/docs/about-claude/models/migrating-to-claude-4)
 * [Model deprecations](/en/docs/about-claude/model-deprecations)
 * [Pricing](/en/docs/about-claude/pricing)
##### Learn about Claude
 * [Features overview](/en/docs/build-with-claude/overview)
 * [Building with Claude](/en/docs/overview)
 * [Context windows](/en/docs/build-with-claude/context-windows)
 * [Glossary](/en/docs/about-claude/glossary)
##### Capabilities
 * [Prompt caching](/en/docs/build-with-claude/prompt-caching)
 * [Context editing](/en/docs/build-with-claude/context-editing)
 * [Extended thinking](/en/docs/build-with-claude/extended-thinking)
 * [Streaming Messages](/en/docs/build-with-claude/streaming)
 * [Batch processing](/en/docs/build-with-claude/batch-processing)
 * [Citations](/en/docs/build-with-claude/citations)
 * [Multilingual support](/en/docs/build-with-claude/multilingual-support)
 * [Token counting](/en/docs/build-with-claude/token-counting)
 * [Embeddings](/en/docs/build-with-claude/embeddings)
 * [Vision](/en/docs/build-with-claude/vision)
 * [PDF support](/en/docs/build-with-claude/pdf-support)
 * [Files API](/en/docs/build-with-claude/files)
 * [Search results](/en/docs/build-with-claude/search-results)
 * [Google Sheets add-on](/en/docs/agents-and-tools/claude-for-sheets)
##### Tools
 * [Overview](/en/docs/agents-and-tools/tool-use/overview)
 * [How to implement tool use](/en/docs/agents-and-tools/tool-use/implement-tool-use)
 * [Token-efficient tool use](/en/docs/agents-and-tools/tool-use/token-efficient-tool-use)
 * [Fine-grained tool streaming](/en/docs/agents-and-tools/tool-use/fine-grained-tool-streaming)
 * [Bash tool](/en/docs/agents-and-tools/tool-use/bash-tool)
 * [Code execution tool](/en/docs/agents-and-tools/tool-use/code-execution-tool)
 * [Computer use tool](/en/docs/agents-and-tools/tool-use/computer-use-tool)
 * [Text editor tool](/en/docs/agents-and-tools/tool-use/text-editor-tool)
 * [Web fetch tool](/en/docs/agents-and-tools/tool-use/web-fetch-tool)
 * [Web search tool](/en/docs/agents-and-tools/tool-use/web-search-tool)
 * [Memory tool](/en/docs/agents-and-tools/tool-use/memory-tool)
##### Agent Skills
 * [Overview](/en/docs/agents-and-tools/agent-skills/overview)
 * [Quickstart](/en/docs/agents-and-tools/agent-skills/quickstart)
 * [Best practices](/en/docs/agents-and-tools/agent-skills/best-practices)
##### Model Context Protocol (MCP)
 * [MCP connector](/en/docs/agents-and-tools/mcp-connector)
 * [Remote MCP servers](/en/docs/agents-and-tools/remote-mcp-servers)
##### Use cases
 * [Overview](/en/docs/about-claude/use-case-guides/overview)
 * [Ticket routing](/en/docs/about-claude/use-case-guides/ticket-routing)
 * [Customer support agent](/en/docs/about-claude/use-case-guides/customer-support-chat)
 * [Content moderation](/en/docs/about-claude/use-case-guides/content-moderation)
 * [Legal summarization](/en/docs/about-claude/use-case-guides/legal-summarization)
##### Prompt engineering
 * [Overview](/en/docs/build-with-claude/prompt-engineering/overview)
 * [Claude 4 best practices](/en/docs/build-with-claude/prompt-engineering/claude-4-best-practices)
 * [Prompt generator](/en/docs/build-with-claude/prompt-engineering/prompt-generator)
 * [Use prompt templates](/en/docs/build-with-claude/prompt-engineering/prompt-templates-and-variables)
 * [Prompt improver](/en/docs/build-with-claude/prompt-engineering/prompt-improver)
 * [Be clear and direct](/en/docs/build-with-claude/prompt-engineering/be-clear-and-direct)
 * [Use examples (multishot prompting)](/en/docs/build-with-claude/prompt-engineering/multishot-prompting)
 * [Let Claude think (CoT)](/en/docs/build-with-claude/prompt-engineering/chain-of-thought)
 * [Use XML tags](/en/docs/build-with-claude/prompt-engineering/use-xml-tags)
 * [Give Claude a role (system prompts)](/en/docs/build-with-claude/prompt-engineering/system-prompts)
 * [Prefill Claude's response](/en/docs/build-with-claude/prompt-engineering/prefill-claudes-response)
 * [Chain complex prompts](/en/docs/build-with-claude/prompt-engineering/chain-prompts)
 * [Long context tips](/en/docs/build-with-claude/prompt-engineering/long-context-tips)
 * [Extended thinking tips](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips)
##### Test & evaluate
 * [Define success criteria](/en/docs/test-and-evaluate/define-success)
 * [Develop test cases](/en/docs/test-and-evaluate/develop-tests)
 * [Using the Evaluation Tool](/en/docs/test-and-evaluate/eval-tool)
 * [Reducing latency](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-latency)
##### Strengthen guardrails
 * [Reduce hallucinations](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-hallucinations)
 * [Increase output consistency](/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency)
 * [Mitigate jailbreaks](/en/docs/test-and-evaluate/strengthen-guardrails/mitigate-jailbreaks)
 * [Streaming refusals](/en/docs/test-and-evaluate/strengthen-guardrails/handle-streaming-refusals)
 * [Reduce prompt leak](/en/docs/test-and-evaluate/strengthen-guardrails/reduce-prompt-leak)
 * [Keep Claude in character](/en/docs/test-and-evaluate/strengthen-guardrails/keep-claude-in-character)
On this page
 * [How to count message tokens](#how-to-count-message-tokens)
 * [Supported models](#supported-models)
 * [Count tokens in basic messages](#count-tokens-in-basic-messages)
 * [Count tokens in messages with tools](#count-tokens-in-messages-with-tools)
 * [Count tokens in messages with images](#count-tokens-in-messages-with-images)
 * [Count tokens in messages with extended thinking](#count-tokens-in-messages-with-extended-thinking)
 * [Count tokens in messages with PDFs](#count-tokens-in-messages-with-pdfs)
 * [Pricing and rate limits](#pricing-and-rate-limits)
 * [FAQ](#faq)
Token counting enables you to determine the number of tokens in a message before sending it to Claude, helping you make informed decisions about your prompts and usage. With token counting, you can
 * Proactively manage rate limits and costs
 * Make smart model routing decisions
 * Optimize prompts to be a specific length
* * *
## 
[​](#how-to-count-message-tokens)
How to count message tokens
The [token counting](/en/api/messages-count-tokens) endpoint accepts the same structured list of inputs for creating a message, including support for system prompts, [tools](/en/docs/agents-and-tools/tool-use/overview), [images](/en/docs/build-with-claude/vision), and [PDFs](/en/docs/build-with-claude/pdf-support). The response contains the total number of input tokens.
The token count should be considered an **estimate**. In some cases, the actual number of input tokens used when creating a message may differ by a small amount.Token counts may include tokens added automatically by Anthropic for system optimizations. **You are not billed for system-added tokens**. Billing reflects only your content.
### 
[​](#supported-models)
Supported models
All [active models](/en/docs/about-claude/models/overview) support token counting.
### 
[​](#count-tokens-in-basic-messages)
Count tokens in basic messages
Python
TypeScript
Shell
Java
Copy
```
import anthropic
client = anthropic.Anthropic()
response = client.messages.count_tokens(
 model="claude-sonnet-4-5",
 system="You are a scientist",
 messages=[{
 "role": "user",
 "content": "Hello, Claude"
 }],
)
print(response.json())
```
JSON
Copy
```
{ "input_tokens": 14 }
```
### 
[​](#count-tokens-in-messages-with-tools)
Count tokens in messages with tools
[Server tool](/en/docs/agents-and-tools/tool-use/overview#server-tools) token counts only apply to the first sampling call.
Python
TypeScript
Shell
Java
Copy
```
import anthropic
client = anthropic.Anthropic()
response = client.messages.count_tokens(
 model="claude-sonnet-4-5",
 tools=[
 {
 "name": "get_weather",
 "description": "Get the current weather in a given location",
 "input_schema": {
 "type": "object",
 "properties": {
 "location": {
 "type": "string",
 "description": "The city and state, e.g. San Francisco, CA",
 }
 },
 "required": ["location"],
 },
 }
 ],
 messages=[{"role": "user", "content": "What's the weather like in San Francisco?"}]
)
print(response.json())
```
JSON
Copy
```
{ "input_tokens": 403 }
```
### 
[​](#count-tokens-in-messages-with-images)
Count tokens in messages with images
Shell
Python
TypeScript
Java
Copy
```
#!/bin/sh
IMAGE_URL="https://upload.wikimedia.org/wikipedia/commons/a/a7/Camponotus_flavomarginatus_ant.jpg"
IMAGE_MEDIA_TYPE="image/jpeg"
IMAGE_BASE64=$(curl "$IMAGE_URL" | base64)
curl https://api.anthropic.com/v1/messages/count_tokens \
 --header "x-api-key: $ANTHROPIC_API_KEY" \
 --header "anthropic-version: 2023-06-01" \
 --header "content-type: application/json" \
 --data \
'{
 "model": "claude-sonnet-4-5",
 "messages": [
 {"role": "user", "content": [
 {"type": "image", "source": {
 "type": "base64",
 "media_type": "'$IMAGE_MEDIA_TYPE'",
 "data": "'$IMAGE_BASE64'"
 }},
 {"type": "text", "text": "Describe this image"}
 ]}
 ]
}'
```
JSON
Copy
```
{ "input_tokens": 1551 }
```
### 
[​](#count-tokens-in-messages-with-extended-thinking)
Count tokens in messages with extended thinking
See [here](/en/docs/build-with-claude/extended-thinking#how-context-window-is-calculated-with-extended-thinking) for more details about how the context window is calculated with extended thinking
 * Thinking blocks from **previous** assistant turns are ignored and **do not** count toward your input tokens
 * **Current** assistant turn thinking **does** count toward your input tokens
Shell
Python
TypeScript
Java
Copy
```
curl https://api.anthropic.com/v1/messages/count_tokens \
 --header "x-api-key: $ANTHROPIC_API_KEY" \
 --header "content-type: application/json" \
 --header "anthropic-version: 2023-06-01" \
 --data '{
 "model": "claude-sonnet-4-5",
 "thinking": {
 "type": "enabled",
 "budget_tokens": 16000
 },
 "messages": [
 {
 "role": "user",
 "content": "Are there an infinite number of prime numbers such that n mod 4 == 3?"
 },
 {
 "role": "assistant",
 "content": [
 {
 "type": "thinking",
 "thinking": "This is a nice number theory question. Lets think about it step by step...",
 "signature": "EuYBCkQYAiJAgCs1le6/Pol5Z4/JMomVOouGrWdhYNsH3ukzUECbB6iWrSQtsQuRHJID6lWV..."
 },
 {
 "type": "text",
 "text": "Yes, there are infinitely many prime numbers p such that p mod 4 = 3..."
 }
 ]
 },
 {
 "role": "user",
 "content": "Can you write a formal proof?"
 }
 ]
 }'
```
JSON
Copy
```
{ "input_tokens": 88 }
```
### 
[​](#count-tokens-in-messages-with-pdfs)
Count tokens in messages with PDFs
Token counting supports PDFs with the same [limitations](/en/docs/build-with-claude/pdf-support#pdf-support-limitations) as the Messages API.
Shell
Python
TypeScript
Java
Copy
```
curl https://api.anthropic.com/v1/messages/count_tokens \
 --header "x-api-key: $ANTHROPIC_API_KEY" \
 --header "content-type: application/json" \
 --header "anthropic-version: 2023-06-01" \
 --data '{
 "model": "claude-sonnet-4-5",
 "messages": [{
 "role": "user",
 "content": [
 {
 "type": "document",
 "source": {
 "type": "base64",
 "media_type": "application/pdf",
 "data": "'$(base64 -i document.pdf)'"
 }
 },
 {
 "type": "text",
 "text": "Please summarize this document."
 }
 ]
 }]
 }'
```
JSON
Copy
```
{ "input_tokens": 2188 }
```
* * *
## 
[​](#pricing-and-rate-limits)
Pricing and rate limits
Token counting is **free to use** but subject to requests per minute rate limits based on your [usage tier](/en/api/rate-limits#rate-limits). If you need higher limits, contact sales through the [Claude Console](https://console.anthropic.com/settings/limits). Usage tier | Requests per minute (RPM) 
---|--- 
1 | 100 
2 | 2,000 
3 | 4,000 
4 | 8,000 
Token counting and message creation have separate and independent rate limits — usage of one does not count against the limits of the other.
* * *
## 
[​](#faq)
FAQ
Does token counting use prompt caching?
No, token counting provides an estimate without using caching logic. While you may provide `cache_control` blocks in your token counting request, prompt caching only occurs during actual message creation.
Was this page helpful?
YesNo
[Multilingual support](/en/docs/build-with-claude/multilingual-support)[Embeddings](/en/docs/build-with-claude/embeddings)
Assistant
Responses are generated using AI and may contain mistakes.