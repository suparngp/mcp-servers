# Auto-activate project venv (and bootstrap if needed)
# This file is evaluated by direnv when you cd into this directory.
# Trust it with:  direnv allow

set -euo pipefail

# If venv missing or not on Python 3.13, (re)create via setup script
if [ ! -d scripts/venv ] || ! scripts/venv/bin/python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))' 2>/dev/null | grep -q '^3\.13$'; then
  ./scripts/setup.sh
fi

# Activate venv
. ./scripts/venv/bin/activate
